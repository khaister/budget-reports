(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{239:function(e,t,n){e.exports=n(438)},438:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(43),c=n.n(o),i=n(18),u=n(102),l=n(5),s=n.n(l),d=n(17),m=n.n(d),g=n(44),h=n.n(g),f={},p=function(e){if(f[e])return f[e];var t=localStorage.getItem(e);if(t){var n=JSON.parse(t);return f[e]=n,n}return null},y=function(e,t){delete f[e];try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}},b=n(22),v=n(6),E=n(99),x=n.n(E),M={excludeFirstMonth:{localStorageKey:"budget-reports-exclude-first-month",default:!1},excludeLastMonth:{localStorageKey:"budget-reports-exclude-last-month",default:!1},investmentAccounts:{localStorageKey:"budget-reports-investment-accounts",default:{}},lastUpdated:{localStorageKey:"budget-reports-last-updated",default:null},mortgageAccounts:{localStorageKey:"budget-reports-mortgage-accounts",default:{}},netWorthHiddenAccounts:{localStorageKey:"budget-reports-networth-hidden-accounts",default:{}},spendingMonthsToCompare:{localStorageKey:"budget-reports-spending-months-to-compare",default:3},trendsShowAverage:{localStorageKey:"budget-reports-trends-show-average",default:!0}},j=function(e,t){var n=M[e];if(!n)throw new Error("not a valid settings key");return x()(p(n.localStorageKey),t,n.default)},I=function(e,t,n){var a=M[e];if(!a)throw new Error("not a valid settings key");var r=p(a.localStorageKey);y(a.localStorageKey,Object(v.a)({},r,Object(b.a)({},t,n)))},O=n(4),A=n.n(O),S=n(80),C=n.n(S),k=n(215),w=n.n(k),T=n(78),B=n.n(T),_=n(53),P=n.n(_),F=n(216),R=n.n(F),L=n(19),G=n.n(L),Y=n(81),D=n.n(Y),N=function(e){return function(t){var n={};return t.forEach(function(t){var a=e(t);n[a]||(n[a]=[]),n[a].push(t)}),n}},z=function(e){return function(t){var n={};return t.forEach(function(t){n[t[e]]||(n[t[e]]=[]),n[t[e]].push(t)}),n}},W=function(e){return function(t){return t.reduce(function(t,n){return Object(v.a)({},t,Object(b.a)({},n[e],n))},{})}},U=function(e){return function(t){return t.reduce(function(t,n){return t+n[e]},0)}},q=function(e){var t=null,n=null;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return null!==t&&t.length===r.length&&r.every(function(e,n){return e===t[n]})?n:(t=r,n=e.apply(void 0,r))}},K=function(e){return function(t){return e.every(function(e){return!e(t)})}},H=u.b.convertMilliUnitsToCurrencyAmount,V=["Internal Master Category","Credit Card Payments"],J=function(e){var t=D()(e.subtransactions.map(function(e){return e.transaction_id})),n=e.category_groups.filter(function(e){return!V.includes(e.name)}),a=e.categories.filter(function(e){return!e.deleted}).map(function(e){return Object(v.a)({},e,{activity:H(e.activity),balance:H(e.balance),budgeted:H(e.budgeted)})}),r=W("id")(a),o=s()().subtract(239,"months").format("YYYY-MM-01"),c={symbol:e.currency_format.currency_symbol};return Object(v.a)({},P()(["category_groups","currency_format"])(e),{accountsById:W("id")(e.accounts),categoryGroups:n,categoryGroupsById:W("id")(n),categories:a,categoriesById:r,currencyFormat:c,payeesById:W("id")(e.payees),months:G()("month")(e.months),transactions:A()([function(e){return e.map(function(e){return Object(v.a)({},e,{amount:H(e.amount)})})},function(e){return e.filter(function(e){return!e.category_id||!!r[e.category_id]})},C()(function(n){return t.includes(n.id)?A()([function(e){return e.map(function(e){return P()("transaction_id")(Object(v.a)({},n,e,{payee_id:e.payee_id||n.payee_id}))})},function(e){return e.filter(B()("transaction_id",n.id))}])(e.subtransactions):n}),R.a,w()(function(e){return e.date<o}),G()("date"),function(e){return e.filter(function(e){return 0!==e.amount&&!e.deleted})}])(e.transactions)})},$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=arguments.length>3?arguments[3]:void 0;return t.reduce(function(e,t){return function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return t},r=!1,o=e.map(function(e){return e[t]===n[t]?(r=!0,a(e,n)):e});return r?o:o.concat(n)}(e,n,t,a)},e)},Z=["accounts","categories","category_groups","payee_locations","payees","scheduled_subtransactions","scheduled_transactions","subtransactions","transactions"],Q=null,X=function(){return Q||(Q=p("ynab_budget_details"))},ee=function(e){var t=e.id,n=e.budget,a=e.server_knowledge,r=X(),o=Object(v.a)({},r,Object(b.a)({},t,{budget:n,server_knowledge:a}));y("ynab_budget_details",o),Q=o},te="https://api.youneedabudget.com/oauth/authorize?client_id=26243f836b4521747584940e75230cd01921f78a39dfe04194bd4b81f3f381c5&redirect_uri=https://khaister.github.io/budget-reports/&response_type=token&scope=read-only",ne=null,ae=function(){return ne.budgets.getBudgets().then(function(e){var t=e.data;return y("ynab_budgets",t),t}).catch(function(e){if(h()({id:"401",name:"unauthorized"})(e.error)||"Failed to fetch"===e.message)return localStorage.removeItem("ynab_access_token"),p("ynab_budgets")||{budgets:[]};throw e})},re=function(e){return ne.budgets.getBudgetById(e).then(function(t){var n=t.data,a=n.budget,r=n.server_knowledge;return ee({id:e,budget:a,server_knowledge:r}),I("lastUpdated",e,s()().valueOf()),{budget:J(a),authorized:!0}}).catch(function(e){if(h()({id:"401",name:"unauthorized"})(e.error)||"Failed to fetch"===e.message)return localStorage.removeItem("ynab_access_token"),{budget:{categories:[],transactions:[],payees:[]},authorized:!1};throw e})},oe=function(e){var t=function(e){return m()(e)(X())}(e);return t?s()().valueOf()-j("lastUpdated",e)<8e3?re(e):ne.budgets.getBudgetById(e,t.server_knowledge).then(function(n){var a=n.data;try{var r=function(e,t){return Object(v.a)({},e,t,Z.reduce(function(n,a){return Object(v.a)({},n,Object(b.a)({},a,$(e[a],t[a])))},{}),{months:$(e.months,t.months,"month",function(e,t){return Object(v.a)({},e,t,{categories:$(e.categories,t.categories)})})})}(t.budget,a.budget);return ee({id:e,budget:r,server_knowledge:a.server_knowledge}),I("lastUpdated",e,s()().valueOf()),{budget:J(r),authorized:!0}}catch(o){return re(e)}}).catch(function(e){if(h()({id:"401",name:"unauthorized"})(e.error)||"Failed to fetch"===e.message)return{budget:J(t.budget),authorized:!1};throw e}):re(e)},ce=function(){var e=p("ynab_budgets");return e&&e.default_budget},ie=function(){localStorage.setItem("budget-reports-last-location",window.location.hash)},ue=n(10),le=n(11),se=n(13),de=n(12),me=n(14),ge=n(20),he=n(60),fe=n.n(he),pe=n(1),ye=n(2);function be(){var e=Object(pe.a)(["\n  font-size: 11px;\n  line-height: 16px;\n  font-weight: 400;\n  color: #999;\n"]);return be=function(){return e},e}function ve(){var e=Object(pe.a)(["\n  font-size: 13px;\n  line-height: 21px;\n  font-weight: 400;\n  color: #666;\n"]);return ve=function(){return e},e}function Ee(){var e=Object(pe.a)(["\n  font-size: 14px;\n  line-height: 22px;\n  font-weight: 500;\n  color: #222;\n"]);return Ee=function(){return e},e}function xe(){var e=Object(pe.a)(["\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 24px;\n  color: #222;\n"]);return xe=function(){return e},e}function Me(){var e=Object(pe.a)(["\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 24px;\n  color: #222;\n"]);return Me=function(){return e},e}var je=ye.a.div(Me()),Ie=ye.a.div(xe()),Oe=ye.a.div(Ee()),Ae=ye.a.div(ve()),Se=ye.a.div(be()),Ce=function(){return r.a.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.a.createElement(Oe,null,"Loading\u2026"),r.a.createElement(Ae,null,"beep, beep, boop"))},ke=function(e){function t(){return Object(ue.a)(this,t),Object(se.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(le.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.budgetId,n=e.budgetLoaded,a=e.onRequestBudget;n||a(t)}},{key:"render",value:function(){return this.props.budgetLoaded?this.props.children:r.a.createElement(Ce,null)}}]),t}(a.Component),we=n(55),Te=n.n(we),Be=Te()("#4399ff").lighten(32).desaturate().toHexString(),_e=Te()("#4399ff").lighten(5).desaturate().toHexString(),Pe=Te()("#4399ff").lighten(25).desaturate().toHexString(),Fe=Te()("red").lighten(30).desaturate(60).toHexString();function Re(){var e=Object(pe.a)(["\n  background-color: ",";\n  border-color: ",";\n  color: #fff;\n"]);return Re=function(){return e},e}function Le(){var e=Object(pe.a)(["\n  display: inline-block;\n  user-select: none;\n  border: 1px solid #ccc;\n  padding: 4px 12px;\n  border-radius: 2px;\n\n  & + & {\n    margin-left: 5px;\n  }\n"]);return Le=function(){return e},e}var Ge=Object(ye.a)(Ae)(Le()),Ye=Object(ye.a)(Ge)(Re(),"#4399ff","#4399ff"),De=Ge,Ne=n(219),ze=n(62),We=n(52),Ue=n.n(We),qe=n(82),Ke=n(133),He=n(134),Ve=n(135),Je=n(136),$e=n(137),Ze=n(138),Qe=n(139),Xe=n(140),et=n(141),tt=n(142),nt=n(221);qe.b.add(Ke.faArrowLeft,He.faBars,Ve.faCaretDown,Je.faChevronRight,$e.faCog,Ze.faEllipsisV,Qe.faEye,Xe.faEyeSlash,et.faPencilAlt,tt.faTimes);var at={"arrow-left":Ke.faArrowLeft,bars:He.faBars,"caret-down":Ve.faCaretDown,"chevron-right":Je.faChevronRight,cog:$e.faCog,pencil:et.faPencilAlt,"ellipsis-v":Ze.faEllipsisV,eye:Qe.faEye,"eye-slash":Xe.faEyeSlash,times:tt.faTimes},rt={faded:{fontWeight:400,color:"#aaa",fontSize:10}},ot=function(e){var t=e.icon,n=e.style,a=e.faded,o=Object(ze.a)(e,["icon","style","faded"]);return r.a.createElement(nt.a,Object.assign({},o,{icon:at[t],style:Object(v.a)({},n,a&&rt.faded)}))},ct=function(e,t){return e.replace(/:([a-zA-Z]*)/g,function(e,n){return t[n]})},it={currentMonth:{path:"/budgets/:budgetId/current",title:"Current Month Spending",props:["budget","currentMonth","investmentAccounts"]},currentMonthGroup:{path:"/budgets/:budgetId/current/:categoryGroupId",title:function(e,t){return t.categoryGroupsById[e.categoryGroupId].name},props:["budget","currentMonth"],paramProps:["categoryGroupId"],breadcrumbs:["currentMonth"]},currentMonthCategory:{path:"/budgets/:budgetId/current/:categoryGroupId/:categoryId",title:function(e,t){return t.categoriesById[e.categoryId].name},props:["budget","currentMonth"],paramProps:["categoryId","categoryGroupId"],breadcrumbs:["currentMonth","currentMonthGroup"]},groups:{path:"/budgets/:budgetId/groups",title:"Spending Trends",props:["budget"]},group:{path:"/budgets/:budgetId/groups/:categoryGroupId",title:function(e,t){return t.categoryGroupsById[e.categoryGroupId].name},props:["budget"],paramProps:["categoryGroupId"],breadcrumbs:["groups"]},category:{path:"/budgets/:budgetId/groups/:categoryGroupId/categories/:categoryId",title:function(e,t){return t.categoriesById[e.categoryId].name},props:["budget"],paramProps:["categoryId"],breadcrumbs:["groups","group"]},categoryPayee:{path:"/budgets/:budgetId/groups/:categoryGroupId/categories/:categoryId/payees/:payeeId",title:function(e,t){return m()(["payeesById",e.payeeId,"name"],t)||"Payee Not Found"},props:["budget"],paramProps:["categoryId","payeeId"],breadcrumbs:["groups","group","category"]},income:{path:"/budgets/:budgetId/income",title:"Income Trends",props:["budget"]},incomeVsExpenses:{path:"/budgets/:budgetId/income-vs-expenses",title:"Income vs Expenses",props:["budget","investmentAccounts"]},netWorth:{path:"/budgets/:budgetId/net-worth",title:"Net Worth",props:["budget","investmentAccounts","mortgageAccounts"]},investments:{path:"/budgets/:budgetId/investments",title:"Investments",props:["budget","investmentAccounts"]},projections:{path:"/budgets/:budgetId/projections",title:"Retirement Calculator",props:["budget","investmentAccounts","mortgageAccounts"]},settings:{path:"/budgets/:budgetId/settings",title:"Budget Settings",props:["budget","investmentAccounts","mortgageAccounts","onUpdateAccounts"]}};function ut(){var e=Object(pe.a)(["\n  color: inherit;\n  display: flex;\n  align-items: center;\n  height: 60px;\n  padding: 0 20px;\n  background-color: ",";\n"]);return ut=function(){return e},e}function lt(){var e=Object(pe.a)(["\n  width: ","px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return lt=function(){return e},e}function st(){var e=Object(pe.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n  height: 60px;\n"]);return st=function(){return e},e}var dt=ye.a.div(st()),mt=ye.a.div(lt(),60),gt=Object(ye.a)(i.c)(ut(),function(e){return e.active&&Be}),ht=function(e){function t(){return Object(ue.a)(this,t),Object(se.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){var e=this.props,t=e.budgetId,n=e.location,o=e.onCloseSidebar;return r.a.createElement(a.Fragment,null,r.a.createElement(ft,{onCloseSidebar:o,budgetId:t}),["currentMonth","groups","income","incomeVsExpenses","netWorth","investments","projections"].map(function(e){var a=it[e],c=a.path,i=a.title;return r.a.createElement(pt,{key:c,to:ct(c,{budgetId:t}),active:Object(ge.f)(n,{path:c}),onClick:o},i)}),r.a.createElement(pt,{to:"/budgets"},"Switch Budgets"))}}]),t}(a.PureComponent),ft=function(e){function t(){return Object(ue.a)(this,t),Object(se.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onCloseSidebar,n=e.budgetId;return r.a.createElement(dt,null,r.a.createElement(mt,{onClick:t},r.a.createElement(ot,{icon:"times"})),r.a.createElement(i.b,{to:ct(it.settings.path,{budgetId:n}),style:{display:"flex",color:"inherit"},onClick:t},r.a.createElement(mt,null,r.a.createElement(ot,{icon:"cog"}))))}}]),t}(a.PureComponent),pt=function(e){function t(){return Object(ue.a)(this,t),Object(se.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){return r.a.createElement(gt,this.props)}}]),t}(a.PureComponent),yt=ht,bt=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(se.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleSetOpen=function(e){n.setState({open:e})},n.handleTriggerClick=function(){n.setState({open:!0})},n.handleCloseSidebar=function(){n.setState({open:!1})},n}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){var e=this.props,t=e.budgetId,n=e.children,a=e.location,o=this.state.open;return r.a.createElement(Ne.a,{sidebar:r.a.createElement(yt,{budgetId:t,location:a,onCloseSidebar:this.handleCloseSidebar}),open:o,onSetOpen:this.handleSetOpen,styles:{sidebar:{backgroundColor:"#fff",width:280,pointerEvents:!o&&"none"}}},n({sidebarTrigger:r.a.createElement(vt,{onClick:this.handleTriggerClick})}))}}]),t}(a.Component),vt=function(e){var t=e.onClick;return r.a.createElement("div",{onClick:t,style:{alignSelf:"stretch",display:"flex",alignItems:"center",justifyContent:"center",width:60}},r.a.createElement(ot,{icon:"bars"}))},Et=bt;function xt(){var e=Object(pe.a)(["\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"]);return xt=function(){return e},e}var Mt=ye.a.div(xt()),jt=function(e){var t=e.authorized,n=e.budgetId,a=e.budgetLoaded,o=e.children,c=e.location,i=e.onAuthorize,u=e.onRequestBudget;return r.a.createElement(ke,{budgetId:n,budgetLoaded:a,onRequestBudget:u},r.a.createElement(Et,{budgetId:n,location:c},function(e){var n=e.sidebarTrigger;return r.a.createElement(Mt,null,o({sidebarTrigger:n}),!t&&r.a.createElement("div",{style:{padding:"15px 20px",backgroundColor:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0,borderTop:"1px solid #ccc"}},"Your authorization expired.",r.a.createElement(Ye,{onClick:i},"Reauthorize")))}))},It=n(9),Ot=n(61),At=n.n(Ot),St=n(54),Ct=n.n(St),kt=n(16),wt=n.n(kt),Tt=n(40),Bt=n.n(Tt),_t=wt.a.convert({cap:!1}),Pt=q(function(e){var t=m()("id")(e.payees.find(function(e){return"Starting Balance"===e.name})),n=m()("id")(e.payees.find(function(e){return"Reconciliation Balance Adjustment"===e.name}));return function(e){return e.payee_id===t||e.payee_id===n}}),Ft=q(function(e){var t=m()("id")(e.categories.find(function(e){return"To be Budgeted"===e.name}));return function(e){return e.category_id===t}}),Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return!t.category_id||!!e[t.transfer_account_id]}},Lt=function(e){return e.date.slice(0,7)},Gt=q(function(e){return e.filter(function(e){return!!e.category_id})}),Yt=function(e){var t=Gt(e.transactions);return t.length?Lt(Bt()(t)):void 0},Dt=function(e){var t=e.payeesById,n=e.transactions,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return A()([_t(function(e,n){return Object(v.a)({},t[n]?Ct()(["id","name"])(t[n]):{id:"no-payee",name:"(no payee)"},{amount:U("amount")(e)/a})}),z("payee_id")])(n)},Nt=function(e){return e.replace(/[^a-zA-Z0-9 ]/g,"").trim()},zt=function(){var e=Object(a.useState)(null),t=Object(It.a)(e,2),n=t[0],r=t[1],o=Object(a.useRef)(n);o.current=n;return[n,function(e){r(e===o.current?null:e)}]},Wt=function(){var e=Object(a.useState)(null),t=Object(It.a)(e,2),n=t[0],r=t[1];return[n,function(e){r(e===n?null:e)}]},Ut=function(e){var t=Object(a.useState)(j("trendsShowAverage",e)),n=Object(It.a)(t,2),r=n[0],o=n[1];return[r,function(){o(!r),I("trendsShowAverage",e,!r)}]},qt=function(e){var t=Object(a.useState)(j("excludeFirstMonth",e.id)),n=Object(It.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(j("excludeLastMonth",e.id)),i=Object(It.a)(c,2),u=i[0],l=i[1],d=Yt(e);return{excludeFirstMonth:r,excludeLastMonth:u,months:function(e,t){for(var n=[e],a=e;a!==t;)a=s()(a).add(1,"months").format("YYYY-MM"),n.push(a);return n}(r?s()(d).add(1,"months").format("YYYY-MM"):d,u?s()().subtract(1,"months").format("YYYY-MM"):s()().format("YYYY-MM")),onSetExclusion:function(t){var n=t.month,a=t.exclude;"first"===n?(o(a),I("excludeFirstMonth",e.id,a)):(l(a),I("excludeLastMonth",e.id,a))}}},Kt=function(e){var t=Object(a.useState)(e),n=Object(It.a)(t,2),r=n[0],o=n[1];return[r,function(){o(!1)},function(){o(!0)},function(){o(!r)}]},Ht=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(se.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).toBeScrolled=null,n.raf=null,n.scrollPositions={},n}return Object(me.a)(t,e),Object(le.a)(t,[{key:"getSnapshotBeforeUpdate",value:function(){return{scrollTop:this.toBeScrolled.scrollTop}}},{key:"componentDidUpdate",value:function(e,t,n){var a=this,r=this.props,o=r.action,c=r.location;c!==e.location&&("POP"===o&&(this.scrollPositions[e.location]=n.scrollTop,this.raf=requestAnimationFrame(function(){a.toBeScrolled.scrollTop=a.scrollPositions[c]||0})),"PUSH"===o&&(this.scrollPositions[e.location]=n.scrollTop,this.raf=requestAnimationFrame(function(){a.toBeScrolled.scrollTop=0})),"REPLACE"===o&&(this.raf=requestAnimationFrame(function(){a.toBeScrolled.scrollTop=0})))}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.raf)}},{key:"render",value:function(){var e=this;return this.props.children({ref:function(t){e.toBeScrolled=t}})}}]),t}(a.Component),Vt=n(83),Jt=n.n(Vt),$t=Jt()(it).filter(function(e){return!!e.breadcrumbs}).map(function(e){return{path:e.path,breadcrumbs:e.breadcrumbs.map(function(e){return{title:it[e].title,path:it[e].path}})}}),Zt=function(e){var t=e.budget;return t?r.a.createElement(ge.d,null,$t.map(function(e){var n=e.path,o=e.breadcrumbs;return r.a.createElement(ge.b,{key:n,path:n,exact:!0,render:function(e){return r.a.createElement(Se,{style:{lineHeight:1,whiteSpace:"normal"}},o.map(function(n,c){var u=n.title,l=n.path;return r.a.createElement(a.Fragment,{key:l},r.a.createElement(i.b,{to:ct(l,e.match.params),style:{paddingBottom:8,display:"inline-block"}},"function"===typeof u?u(e.match.params,t):u),c!==o.length-1&&r.a.createElement(ot,{icon:"chevron-right",style:{padding:"0 5px",fontSize:8}}))}))}})})):null},Qt=function(){return r.a.createElement(ge.d,null,r.a.createElement(ge.b,{path:it.currentMonth.path,exact:!0,render:function(e){var t=e.match;return r.a.createElement(Ae,null,r.a.createElement(i.b,{to:ct(it.groups.path,t.params)},"Past Months"))}}),r.a.createElement(ge.b,{path:it.currentMonthGroup.path,exact:!0,render:function(e){var t=e.match;return r.a.createElement(Ae,null,r.a.createElement(i.b,{to:ct(it.group.path,t.params)},"Past Months"))}}),r.a.createElement(ge.b,{path:it.currentMonthCategory.path,exact:!0,render:function(e){var t=e.match;return r.a.createElement(Ae,null,r.a.createElement(i.b,{to:ct(it.category.path,t.params)},"Past Months"))}}),r.a.createElement(ge.b,{path:it.groups.path,exact:!0,render:function(e){var t=e.match;return r.a.createElement(Ae,null,r.a.createElement(i.b,{to:ct(it.currentMonth.path,t.params)},"Current Month"))}}),r.a.createElement(ge.b,{path:it.group.path,exact:!0,render:function(e){var t=e.match;return r.a.createElement(Ae,null,r.a.createElement(i.b,{to:ct(it.currentMonthGroup.path,t.params)},"Current Month"))}}),r.a.createElement(ge.b,{path:it.category.path,exact:!0,render:function(e){var t=e.match;return r.a.createElement(Ae,null,r.a.createElement(i.b,{to:ct(it.currentMonthCategory.path,t.params)},"Current Month"))}}))};function Xt(){var e=Object(pe.a)(["\n  flex-grow: 1;\n  overflow-y: auto;\n"]);return Xt=function(){return e},e}function en(){var e=Object(pe.a)(["\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  height: 60px;\n  padding-left: 0;\n  padding-right: 20px;\n  background-color: #fff;\n  background-clip: padding-box;\n  border-bottom: 2px solid rgba(0, 0, 0, 0.1);\n  white-space: pre;\n  user-select: none;\n"]);return en=function(){return e},e}var tn=ye.a.div(en()),nn=ye.a.div(Xt()),an=function(e){var t=e.sidebarTrigger,n=e.historyAction,o=e.location,c=e.budget,i=e.title,u=(e.breadcrumbs,e.fixedContent),l=e.content;return r.a.createElement(a.Fragment,null,r.a.createElement(tn,null,t,r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(Zt,{budget:c}),r.a.createElement(je,{style:{lineHeight:1}},i)),r.a.createElement(Qt,null)),u,r.a.createElement(Ht,{action:n,location:o},function(e){var t=e.ref;return r.a.createElement(nn,{ref:t},l)}))},rn=n(30);function on(){var e=Object(pe.a)(["\n  padding: 0 "," 15px;\n"]);return on=function(){return e},e}function cn(){var e=Object(pe.a)(["\n  padding: 0 10px;\n  margin-right: -10px;\n  align-self: stretch;\n  display: flex;\n  align-items: center;\n  margin-left: 5px;\n"]);return cn=function(){return e},e}function un(){var e=Object(pe.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 15px 20px;\n  user-select: none;\n"]);return un=function(){return e},e}function ln(){var e=Object(pe.a)(["\n  margin: ",";\n  background-color: #fff;\n  background-clip: padding-box;\n  border: "," solid rgba(0, 0, 0, 0.05);\n  border-bottom-width: 1px;\n  border-radius: 2px;\n"]);return ln=function(){return e},e}var sn=ye.a.div(ln(),function(e){return e.fullWidth?"0":"2px"},function(e){return e.fullWidth?"0":"1px"}),dn=Object(ye.a)(Oe)(un()),mn=ye.a.div(cn()),gn=ye.a.div(on(),function(e){return e.fullWidth?"22px":"20px"}),hn=function(e){var t=e.actions,n=e.children,o=e.fullWidth,c=e.hasSettings,i=e.noPadding,u=e.title,l=e.onClickSettings,s=Object(a.useState)(!0),d=Object(It.a)(s,2),m=d[0],g=d[1];return r.a.createElement(sn,{fullWidth:o},r.a.createElement(dn,null,r.a.createElement("div",{style:{display:"flex",alignItems:"center"},onClick:function(){g(!m)}},u,r.a.createElement(ot,{icon:"chevron-right",transform:{rotate:m?90:0},style:{marginLeft:10},faded:!0})),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},m&&t,c&&m&&r.a.createElement(mn,{onClick:l},r.a.createElement(ot,{icon:"cog",faded:!0})))),r.a.createElement(rn.a,{isExpanded:m},r.a.createElement(gn,{style:{padding:i&&0}},n)))},fn=n(237),pn=n(100),yn=n.n(pn),bn=n(224),vn=n.n(bn),En=n(32),xn=n.n(En),Mn=n(23),jn=n.n(Mn),In=n(225),On=n.n(In),An=n(226),Sn=n.n(An),Cn={chart:{height:240,spacing:[0,0,0,0]},credits:{enabled:!1},legend:{enabled:!1},title:{text:""},subtitle:{text:""},tooltip:{enabled:!1},xAxis:{tickLength:0}},kn=function(e){var t=e.options;return r.a.createElement(Sn.a,{highcharts:On.a,options:Object(v.a)({},Cn,t,{chart:Object(v.a)({},Cn.chart,t.chart),xAxis:Object(v.a)({},Cn.xAxis,t.xAxis)})})},wn=r.a.createContext(),Tn=function(e){var t=e.amount,n=e.amountAfterDecimal,a=e.expectNegative,o=e.expectPositive,c=e.showCurrencySymbol,i=e.style;return r.a.createElement(wn.Consumer,null,function(e){return r.a.createElement("span",{style:Object(v.a)({},i,{color:0===t?null:t>0?o?null:"#2cbc2f":a?null:"red"})},0===t?null:t>0?o?null:"+":a?null:"-",c&&(m()("symbol")(e)||"$"),function(e){for(var t=(e+="").split("."),n=t[0],a=t.length>1?"."+t[1]:"",r=/(\d+)(\d{3})/;r.test(n);)n=n.replace(r,"$1,$2");return n+a}(Math.abs(t).toFixed(n)))})};Tn.defaultProps={amountAfterDecimal:2};var Bn=Tn,_n=function(e){var t=e.numbers,n=e.alwaysRound,a=e.expectPositive,o=t.some(function(e){var t=e.amount;return Math.abs(t)<100});return r.a.createElement("div",{style:{textAlign:"right",lineHeight:"16px",display:"flex",justifyContent:"flex-start",flexDirection:"row-reverse",marginBottom:8}},t.map(function(e){var t=e.amount,c=e.label,i=e.isMoney,u=void 0===i||i,l=e.decimalsToRound;return r.a.createElement("div",{key:c,style:{marginLeft:20}},r.a.createElement(Ie,{style:{lineHeight:"16px"}},r.a.createElement(Bn,{amount:t,amountAfterDecimal:yn()(l)?l:o&&!n?2:0,showCurrencySymbol:u,expectNegative:!a,expectPositive:a})),r.a.createElement(Se,null,c))}))};function Pn(){var e=Object(pe.a)(["\n  border-top: 1px solid #ddd;\n  display: flex;\n  justify-content: space-between;\n"]);return Pn=function(){return e},e}var Fn=ye.a.div(Pn()),Rn=function(e){var t=e.month,n=e.transactionsByDate,a=s()().format("YYYY-MM-DD"),r=0;return xn()(-1,s()(t).daysInMonth()).map(function(e){var o=-1===e?s()(t).add(-1,"days"):"".concat(t,"-").concat(vn()("0")(2)(e+1));return o>a?null:r+=-jn()("amount")(n[o]||[])})},Ln=function(e){function t(){return Object(ue.a)(this,t),Object(se.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){var e=this.props,t=e.total,n=e.transactions,o=e.highlightFunction,c=e.currentMonth,i=e.monthsToCompare,u=o?n.filter(o):[],l={type:"areaspline",data:Rn({month:c,transactionsByDate:z("date")(u)}),enableMouseTracking:!1,marker:{enabled:!1},animation:!1,color:"#4399ff",lineWidth:0,fillOpacity:.8},d=s()(c).daysInMonth(),m=s()(c).add(-1,"days"),g=s()(c).add(d-1,"days"),h=z("date")(n),f=Rn({month:c,transactionsByDate:h}),p=xn()(0,d+1).map(function(e){return e/d*t}),y=parseInt(m.format("d"),10),b=xn()(0,6).map(function(e){return{color:"#f2f2f2",from:7*e-1.5-y,to:7*e+.5-y}}),E=xn()(i,0).map(function(e){return{type:"spline",data:Rn({month:s()(c).subtract(e,"months").format("YYYY-MM"),transactionsByDate:h}),enableMouseTracking:!1,color:"#"+Te.a.mix("#4399ff","#f2f2f2",30+70*(e-1)/i).toHex(),lineWidth:1,marker:{enabled:!1},animation:!1}}),x=A()([U("amount"),At()(function(e){return Lt(e)===c})])(n),M=[{amount:x,label:"spent"}];return yn()(t)&&M.push({amount:-(t+x),label:"available"}),r.a.createElement(a.Fragment,null,r.a.createElement(_n,{numbers:M}),r.a.createElement(kn,{key:i,options:{chart:{spacing:[0,0,0,0],height:140,animation:!1},xAxis:{labels:{enabled:!1},plotBands:b},yAxis:{visible:!1,endOnTick:!1,startOnTick:!1},series:[{type:"line",color:"#aaa",dashStyle:"Dot",lineWidth:1,data:p,enableMouseTracking:!1,marker:{enabled:!1},animation:!1}].concat(Object(fn.a)(E),[Object(v.a)({type:"spline",data:f,enableMouseTracking:!1,color:"#4399ff",marker:{enabled:!1},animation:!1},o&&{type:"areaspline",fillOpacity:.2}),l])}}),r.a.createElement(Fn,null,r.a.createElement(Se,null,m.format("MMM D")),r.a.createElement(Se,null,g.format("MMM D"))))}}]),t}(a.PureComponent);function Gn(){var e=Object(pe.a)(["\n  position: relative;\n  min-width: 200px;\n  padding: 15px 20px;\n  margin-left: 20px;\n  margin-right: 20px;\n  background-color: #fff;\n  border-radius: 2px;\n  transition: transform 0.2s ease-in-out, opacity 0.2s ease-in-out;\n"]);return Gn=function(){return e},e}function Yn(){var e=Object(pe.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.7);\n  opacity: 0;\n  transition: opacity 0.2s ease-in-out;\n"]);return Yn=function(){return e},e}function Dn(){var e=Object(pe.a)(["\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n"]);return Dn=function(){return e},e}var Nn=ye.a.div(Dn()),zn=ye.a.div(Yn()),Wn=ye.a.div(Gn()),Un=function(e){return requestAnimationFrame(function(){requestAnimationFrame(e)})},qn=function(e){function t(){var e;return Object(ue.a)(this,t),(e=Object(se.a)(this,Object(de.a)(t).call(this))).handleTransitionEnd=function(){var t=e.state.animationState;"entering"===t?e.setState({animationState:"entered"}):"leaving"===t&&e.setState({animationState:"left"})},e.el=document.createElement("div"),e.state={animationState:"left"},e}return Object(me.a)(t,e),Object(le.a)(t,[{key:"componentDidMount",value:function(){document.body.appendChild(this.el)}},{key:"componentDidUpdate",value:function(e){var t=this;!e.open&&this.props.open&&Un(function(){t.setState({animationState:"entering"})}),e.open&&!this.props.open&&Un(function(){t.setState({animationState:"leaving"})})}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.el)}},{key:"render",value:function(){var e=this.props,t=e.open,n=e.children,a=e.title,c=e.onClose,i=e.width,u=this.state.animationState;if(!t&&"left"===u)return null;var l=["entering","entered"].includes(u);return Object(o.createPortal)(r.a.createElement(Nn,null,r.a.createElement(zn,{onClick:c,style:{opacity:l?1:0},onTransitionEnd:this.handleTransitionEnd}),r.a.createElement(Wn,{style:{opacity:l?1:0,transform:"translate3d(0, ".concat(l?"0":"20px",", 0)"),width:i}},a&&r.a.createElement(Oe,{style:{marginBottom:10}},a),n,r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:20}},r.a.createElement(Ye,{onClick:c},"Done")))),this.el)}}]),t}(a.Component),Kn=function(e){var t=e.open,n=e.monthsToCompare,a=e.onClose,o=e.onDecrementMonths,c=e.onIncrementMonths;return r.a.createElement(qn,{open:t,title:"Chart Settings",onClose:a},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{marginRight:10}},r.a.createElement(De,{onClick:o},"-"),r.a.createElement(De,{onClick:c},"+")),r.a.createElement(Ae,null,"Compare with the last ",n," month",1===n?"":"s")))},Hn=function(e){var t=e.actions,n=e.budgetId,o=e.currentMonth,c=e.highlightFunction,i=e.title,u=e.total,l=e.transactions,s=Kt(!1),d=Object(It.a)(s,3),m=d[0],g=d[1],h=d[2],f=function(e){var t=Object(a.useState)(j("spendingMonthsToCompare",e)),n=Object(It.a)(t,2),r=n[0],o=n[1];return{monthsToCompare:r,onDecrementMonths:function(){var t=Math.max(r-1,0);o(t),I("spendingMonthsToCompare",e,t)},onIncrementMonths:function(){var t=Math.min(r+1,12);o(t),I("spendingMonthsToCompare",e,t)}}}(n),p=f.monthsToCompare,y=f.onIncrementMonths,b=f.onDecrementMonths;return r.a.createElement(a.Fragment,null,r.a.createElement(hn,{actions:t,title:i,hasSettings:!0,onClickSettings:h},r.a.createElement(Ln,{budgetId:n,currentMonth:o,highlightFunction:c,monthsToCompare:p,total:u,transactions:l})),r.a.createElement(Kn,{open:m,monthsToCompare:p,onClose:g,onDecrementMonths:b,onIncrementMonths:y}))};Hn.defaultProps={title:"Day by Day"};var Vn=Hn;function Jn(){var e=Object(pe.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 0;\n  user-select: none;\n\n  &:first-child {\n    padding-top: ",";\n  }\n"]);return Jn=function(){return e},e}var $n=ye.a.div(Jn(),function(e){return!e.isContinuing&&0});function Zn(){var e=Object(pe.a)(["\n  text-align: center;\n  margin: 10px;\n  opacity: 0.5;\n"]);return Zn=function(){return e},e}var Qn=Object(ye.a)(Ae)(Zn()),Xn=function(){return r.a.createElement(Qn,null,"No transactions this month")},ea=function(e){var t=e.label,n=e.minorText,a=e.inLink,o=e.to,c=e.bold;return r.a.createElement(Ae,{style:{fontWeight:c&&700,display:"flex",alignItems:"baseline",whiteSpace:"pre",overflow:"hidden",color:a&&"inherit"}},o?r.a.createElement(i.b,{to:o},t):t,n&&r.a.createElement(Se,{style:{fontWeight:c&&700,overflow:"hidden",textOverflow:"ellipsis"}},"\xa0\u2013 ",n))},ta=function(e){var t=e.label,n=e.count,a=e.inLink,o=e.selected,c=e.showCount,i=e.to;return r.a.createElement(ea,{bold:o,label:t,minorText:c&&"".concat(n," transaction").concat(1===n?"":"s"),inLink:a,to:i})};ta.defaultProps={showCount:!0};var na=ta,aa=function(e){var t=e.amount,n=e.expectNegative,a=e.expectPositive,o=e.total,c=e.faded,i=e.selected;return r.a.createElement(Ae,{style:{display:"flex",alignItems:"baseline",opacity:c?.3:1,fontWeight:i&&700}},r.a.createElement(Bn,{amount:t,expectNegative:n,expectPositive:a}),r.a.createElement(Se,{style:{width:44,textAlign:"right",fontWeight:i&&700}},o?"".concat((t/o*100).toFixed(1),"%"):"\u2013"))},ra=function(e){var t=e.count,n=e.pluralizedName,a=e.showAll,o=e.onToggle;return r.a.createElement(Se,{style:{textAlign:"center",marginTop:5},onClick:o},a?"see less":"see all ".concat(t," ").concat(n))},oa=wt.a.convert({cap:!1}),ca={category_group_id:"category groups",category_id:"categories",payee_id:"payees"},ia=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(se.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={showAll:!1,allMounted:!1},n.handleToggleShowAll=function(){var e=n.state,t=e.allMounted,a=e.showAll;t?n.setState({showAll:!a}):(n.setState({allMounted:!0}),requestAnimationFrame(function(){n.setState({showAll:!0})}))},n}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){var e=this.props,t=e.emptyName,n=e.entityKey,o=e.entityFunction,c=e.entitiesById,i=e.expectNegative,u=e.expectPositive,l=e.linkFunction,s=e.limitShowing,d=e.numMonths,g=e.reverse,h=e.selectedEntityId,f=e.showAverage,p=e.showAverageToggle,y=e.showTransactionCount,b=e.title,v=e.transactions,E=e.onClickEntity,x=e.onToggleAverage,M=this.state,j=M.allMounted,I=M.showAll,O=0,S=A()([G()(function(e){return g?-e.amount:e.amount}),oa(function(e,t){var n=U("amount")(e);return O+=n,{entityId:t,transactions:e.length,amount:n}}),o?N(o):z(n)])(v),C=s&&S.length>6,k=S.slice(0,5),w=S.slice(5);return r.a.createElement(hn,{title:b,actions:p&&r.a.createElement(Ae,{onClick:x},f?"average":"total")},0===S.length&&r.a.createElement(Xn,null),(C?k:S).map(function(e){var n=e.entityId,a=e.transactions,o=e.amount;return r.a.createElement(la,{key:n,showTransactionCount:y,to:l&&c[n]?l(n):null,transactions:a,name:m()("name")(c[n])||t,amount:f?o/d:o,expectNegative:i,expectPositive:u,selected:n===h,total:f?O/d:O,id:n,onClick:E})}),j&&r.a.createElement(rn.a,{isExpanded:I},r.a.createElement(a.Fragment,null,w.map(function(e){var n=e.entityId,a=e.transactions,o=e.amount;return r.a.createElement(la,{key:n,showTransactionCount:y,to:l&&c[n]?l(n):null,transactions:a,name:m()("name")(c[n])||t,amount:f?o/d:o,expectNegative:i,expectPositive:u,selected:n===h,total:O,id:n,onClick:E,isContinuing:!0})}))),!!w.length&&C&&r.a.createElement(ra,{count:S.length,pluralizedName:ca[n],showAll:I,onToggle:this.handleToggleShowAll}))}}]),t}(a.Component);ia.defaultProps={emptyName:"(none)"};var ua=function(e){var t=e.to,n=e.children,a=Object(ze.a)(e,["to","children"]);return t?r.a.createElement(i.b,Object.assign({},a,{to:t}),n):r.a.createElement("span",a,n)},la=function(e){function t(){return Object(ue.a)(this,t),Object(se.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showTransactionCount,n=e.to,a=e.transactions,o=e.name,c=e.amount,i=e.expectNegative,u=e.expectPositive,l=e.total,s=e.selected,d=e.id,m=e.onClick,g=e.isContinuing;return r.a.createElement($n,{isContinuing:g,onClick:m&&function(){return m(d)}},t?r.a.createElement(na,{count:a,label:o,selected:s,to:n}):r.a.createElement(ua,{to:n,onClick:n&&function(e){e.stopPropagation()}},r.a.createElement(Ae,{style:{whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis",color:"inherit",fontWeight:s&&700}},o)),r.a.createElement(aa,{amount:c,expectNegative:i,expectPositive:u,selected:s,total:l}))}}]),t}(a.PureComponent),sa=ia;function da(){var e=Object(pe.a)(["\n  border-top: 0;\n  padding-bottom: 0;\n"]);return da=function(){return e},e}var ma=Object(ye.a)($n)(da()),ga=function(e){var t=e.category,n=e.payee,a=e.memo,o=e.amount;return r.a.createElement(ma,{isContinuing:!0},r.a.createElement("div",{style:{overflow:"hidden"}},r.a.createElement(ea,{label:m()("name")(n)||"(no payee)",minorText:m()("name")(t)||"(no category)"+(a?" (".concat(a,")"):"")})),r.a.createElement(Ae,null,r.a.createElement(Bn,{amount:o,expectNegative:!0})))};function ha(){var e=Object(pe.a)(["\n  box-sizing: border-box;\n  padding-left: 3px;\n  width: ","px;\n  font-weight: 400;\n  color: #888;\n  font-size: 10px;\n"]);return ha=function(){return e},e}function fa(){var e=Object(pe.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: ",";\n  user-select: none;\n\n  ",":first-child > & {\n    padding-top: 0;\n  }\n"]);return fa=function(){return e},e}var pa=ye.a.div(fa(),function(e){return e.isCompact?"0":"8px 0"},$n),ya=ye.a.div(ha(),18),ba=function(e){var t=e.expanded,n=e.name,a=e.id,o=e.amount,c=e.valueRenderer,i=e.onToggle,u=e.isCompact;return r.a.createElement(pa,{onClick:i,isCompact:u},r.a.createElement(Ae,{style:{whiteSpace:"pre",display:"flex",alignItems:"center"}},r.a.createElement(ya,null,r.a.createElement(ot,{icon:"chevron-right",transform:{rotate:t?90:0}})),"function"===typeof n?n({expanded:t}):n),c?c({amount:o,id:a,faded:t}):r.a.createElement(Ae,{style:{opacity:t?.3:1}},r.a.createElement(Bn,{amount:o,expectNegative:!0})))};function va(){var e=Object(pe.a)(["\n  display: block;\n"]);return va=function(){return e},e}var Ea=Object(ye.a)($n)(va()),xa=function(e){var t=e.categoriesById,n=e.date,a=e.expanded,o=e.payeesById,c=e.transactions,i=e.onToggleExpanded;return r.a.createElement(Ea,null,r.a.createElement(ba,{amount:U("amount")(c),expanded:a,name:r.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},s()(n).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"dddd",sameElse:"DD/MM/YYYY"}),!a&&r.a.createElement(Se,null," ","\u2013 ",c.length," transaction",1===c.length?"":"s")),onToggle:i,isCompact:!0}),r.a.createElement(rn.a,{isExpanded:a},r.a.createElement("div",{style:{paddingLeft:18}},c.length?c.map(function(e){return r.a.createElement(ga,{key:e.id,amount:e.amount,payee:o[e.payee_id],category:t[e.category_id],memo:e.memo})}):r.a.createElement(Qn,{style:{margin:0}},"no transactions"))))},Ma=function(e){var t=e.categoriesById,n=e.currentMonth,o=e.payeesById,c=e.transactions,i=z("date")(c),u=xn()(0,5).map(function(e){return s()().subtract(e,"days").format("YYYY-MM-DD")}).filter(function(e){return e.startsWith(n)}),l=Object(a.useState)(u.reduce(function(e,t){return Object(v.a)({},e,Object(b.a)({},t,!1))},{})),d=Object(It.a)(l,2),m=d[0],g=d[1];return r.a.createElement(hn,{title:"Recent Spending"},u.map(function(e){return r.a.createElement(xa,{key:e,categoriesById:t,date:e,expanded:!!m[e],onToggleExpanded:function(){g(Object(v.a)({},m,Object(b.a)({},e,!m[e])))},payeesById:o,transactions:i[e]||[]})}))},ja=function(e){var t=e.budget,n=e.currentMonth,o=e.historyAction,c=e.investmentAccounts,i=e.location,u=e.sidebarTrigger,l=e.title,s=Wt(),d=Object(It.a)(s,2),m=d[0],g=d[1],h=t.categoryGroupsById,f=t.categoriesById,p=t.payeesById,y=t.id,b=m&&h[m],v=t.transactions.filter(K([Ft(t),Rt(c),Pt(t)])),E=At()(function(e){return Lt(e)===n})(v);return r.a.createElement(an,{historyAction:o,location:i,sidebarTrigger:u,title:l,content:r.a.createElement(a.Fragment,null,r.a.createElement(Vn,{budgetId:t.id,currentMonth:n,transactions:v,highlightFunction:m&&function(e){return f[e.category_id].category_group_id===m},title:b?"Day by Day: ".concat(Nt(b.name)):"Day by Day"}),r.a.createElement(Ma,{categoriesById:f,currentMonth:n,payeesById:p,transactions:E}),r.a.createElement(sa,{entitiesById:h,entityFunction:function(e){return f[e.category_id].category_group_id},entityKey:"category_group_id",expectNegative:!0,linkFunction:function(e){return ct(it.currentMonthGroup.path,{budgetId:y,categoryGroupId:e})},selectedEntityId:m,title:"Category Groups",transactions:E,showTransactionCount:!0,onClickEntity:g}))})},Ia=n(101),Oa=n.n(Ia),Aa=function(e){var t=e.average,n=e.data,a=e.height,o=e.series,c=e.selectedMonth,i=e.stacked,u=e.onSelectMonth,l=[],d=[],m=n.map(function(e){return s()(e.month).format("MMM")}),g=null;return c&&(g={months:[c],color:Be}),n.forEach(function(e,t){var n=e.month;"Jan"===s()(n).format("MMM")&&l.push({color:"#ccc",width:1,value:t-.5,zIndex:3})}),g&&g.months.forEach(function(e){var t=Oa()(function(t){return t.month===e})(n);d.push({color:g.color,from:t-.5,to:t+.5})}),r.a.createElement(kn,{key:n.length,options:{chart:{animation:!1,height:a,type:"column",events:{click:function(e){u&&u(n[Math.round(e.xAxis[0].value)].month)}}},xAxis:{categories:m,plotBands:d,plotLines:l},yAxis:{endOnTick:!1,startOnTick:!1,gridLineColor:"#f0f0f0",labels:{align:"left",x:0,y:-2,style:{color:"#bbb",fontSize:"9px"},zIndex:3},tickPixelInterval:30,title:{text:null},plotLines:t&&[{color:"#aaa",dashStyle:"Dot",width:1,value:-t,zIndex:2}]},plotOptions:{series:{animation:!1,stacking:i?"normal":null}},series:o.map(function(e){return"line"===e.type?{color:e.color,data:n.map(e.valueFunction),enableMouseTracking:!1,type:"line",lineWidth:1,marker:{radius:0},zIndex:3}:{borderWidth:0,color:e.color,data:n.map(e.valueFunction),enableMouseTracking:!1,states:{hover:{brightness:0}}}})}})};Aa.defaultProps={height:140,stacked:!0};var Sa=Aa;function Ca(){var e=Object(pe.a)(["\n  box-sizing: border-box;\n  height: ","px;\n  width: ","px;\n  border-radius: 50%;\n  background-color: #fff;\n  transform: translate3d(","px, 0, 0);\n  transition: transform 0.15s ease-in-out;\n"]);return Ca=function(){return e},e}function ka(){var e=Object(pe.a)(["\n  box-sizing: border-box;\n  padding: ","px;\n  display: inline-block;\n  width: ","px;\n  height: ","px;\n  border-radius: ","px;\n  background-color: ",";\n  transition: background-color 0.15s ease-in-out;\n"]);return ka=function(){return e},e}var wa=ye.a.div(ka(),2,32,18,9,function(e){return e.on?"#4399ff":"#ddd"}),Ta=ye.a.div(Ca(),14,14,function(e){return e.on?14:0}),Ba=function(e){var t=e.on,n=e.onClick;return r.a.createElement(wa,{on:t,onClick:n},r.a.createElement(Ta,{on:t}))};function _a(){var e=Object(pe.a)([""]);return _a=function(){return e},e}function Pa(){var e=Object(pe.a)(["\n  user-select: none;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 10px 0;\n"]);return Pa=function(){return e},e}var Fa=ye.a.div(Pa()),Ra=ye.a.div(_a()),La=function(e){var t=e.label,n=e.name,a=e.checked,o=e.onChange;return r.a.createElement(Fa,{onClick:function(){o({target:{name:n,checked:!a}})}},r.a.createElement(Ra,null,t),r.a.createElement(Ba,{on:a,onClick:function(){o({target:{name:n,checked:!a}})}}))},Ga=function(e){var t=e.excludeFirstMonth,n=e.excludeLastMonth,a=e.open,o=e.onClose,c=e.onSetExclusion;return r.a.createElement(qn,{open:a,onClose:o,title:"Chart Settings",width:240},r.a.createElement(La,{checked:t,label:"Exclude first month",name:"excludeFirstMonth",onChange:function(){c({month:"first",exclude:!t})}}),r.a.createElement(La,{checked:n,label:"Exclude last month",name:"excludeLastMonth",onChange:function(){c({month:"last",exclude:!n})}}),r.a.createElement(Se,{style:{marginTop:5}},"Excluding incomplete months may lead to more representative averages"))},Ya=function(e){var t=e.excludeFirstMonth,n=e.excludeLastMonth,o=e.expectPositive,c=e.highlightFunction,i=e.months,u=e.selectedMonth,l=e.title,d=e.transactions,m=e.onSelectMonth,g=e.onSetExclusion,h=Object(a.useState)(!1),f=Object(It.a)(h,2),p=f[0],y=f[1],b=0,v=0,E=N(Lt)(d),x=i.map(function(e){var t=N(c||function(){return!1})(E[e]||[]),n=U("amount")(t.false||[]),a=U("amount")(t.true||[]);return b+=c?a:n,e===u&&(v=c?a:n),{month:e,amount:o?n:-n,highlighted:o?a:-a}}),M=u?[{amount:b/i.length,label:"average"},{amount:v,label:s()(u).format("MMM YYYY")}]:[{amount:b/i.length,label:"average"},{amount:b,label:"total"}],j=[{color:c?Pe:_e,valueFunction:function(e){return e.amount}}];return c&&j.push({color:_e,valueFunction:function(e){return e.highlighted}}),r.a.createElement(hn,{title:l,hasSettings:!0,onClickSettings:function(){y(!0)}},r.a.createElement(_n,{numbers:M,expectPositive:o}),r.a.createElement(Sa,{data:x,average:b/i.length,series:j,selectedMonth:u,onSelectMonth:m}),r.a.createElement(Ga,{excludeFirstMonth:t,excludeLastMonth:n,open:p,onClose:function(){y(!1)},onSetExclusion:g}))};Ya.defaultProps={title:"Month by Month"};var Da=Ya,Na=q(function(e,t,n,a){var r=Yt(e),o=s()().format("YYYY-MM");return e.transactions.filter(K([Pt(e),Rt(t),function(e){return n&&Lt(e)===r},function(e){return a&&Lt(e)===o}]))}),za=q(function(e,t,n,a){return Na(e,t,n,a).filter(function(t){return Ft(e)(t)})}),Wa=function(e){var t=e.budget,n=e.historyAction,o=e.investmentAccounts,c=e.location,i=e.sidebarTrigger,u=e.title,l=qt(t),d=l.excludeFirstMonth,m=l.excludeLastMonth,g=l.months,h=l.onSetExclusion,f=zt(),p=Object(It.a)(f,2),y=p[0],b=p[1],v=Wt(),E=Object(It.a)(v,2),x=E[0],M=E[1],j=Kt(!0),I=Object(It.a)(j,4),O=I[0],A=I[3],S=t.payeesById,C=za(t,o,d,m),k=y&&C.filter(function(e){return Lt(e)===y});return r.a.createElement(an,{historyAction:n,location:c,sidebarTrigger:i,title:u,content:r.a.createElement(a.Fragment,null,r.a.createElement(Da,{excludeFirstMonth:d,excludeLastMonth:m,expectPositive:!0,highlightFunction:x&&function(e){return e.payee_id===x},months:g,selectedMonth:y,title:x?"Month by Month: ".concat(Nt(t.payeesById[x].name)):"Month by Month",transactions:C,onSelectMonth:b,onSetExclusion:h}),r.a.createElement(sa,{key:"payee-".concat(y||"all"),entityKey:"payee_id",entitiesById:S,numMonths:y?1:g.length,reverse:!0,title:y?"Payees: ".concat(s()(y).format("MMMM")):"Payees",transactions:k||C,selectedEntityId:x,showAverageToggle:!y,showAverage:O,onClickEntity:M,onToggleAverage:A}))})},Ua=function(e){var t=e.category,n=e.payee,a=e.memo,o=e.date,c=e.amount,i=e.isContinuing;return r.a.createElement($n,{isContinuing:i},r.a.createElement("div",{style:{overflow:"hidden"}},r.a.createElement(ea,{label:m()("name")(n)||"(no payee)",minorText:(m()("name")(t)||"")+(a?" (".concat(a,")"):"")}),r.a.createElement(Se,null,s()(o).format("dddd, MMM D"))),r.a.createElement(Ae,null,r.a.createElement(Bn,{amount:c,expectNegative:!0})))},qa=function(e){var t=e.transactions,n=e.title,a=e.categoriesById,o=e.payeesById;return r.a.createElement(hn,{title:n},t.length?t.map(function(e){var t=e.id,n=e.category_id,c=e.payee_id,i=e.date,u=e.memo,l=e.amount;return r.a.createElement(Ua,{key:t,amount:l,category:a[n],date:i,memo:u,payee:o[c]})}):r.a.createElement(Xn,null))};qa.defaultProps={title:"Transactions"};var Ka=qa,Ha=function(e){var t=e.budget,n=e.categoryGroupId,o=e.currentMonth,c=e.historyAction,i=e.location,u=e.sidebarTrigger,l=e.title,s=Wt(),d=Object(It.a)(s,2),m=d[0],g=d[1],h=t.id,f=t.payeesById,p=t.categories,y=t.categoriesById,b=t.transactions,v=m&&y[m],E=p.filter(function(e){return e.category_group_id===n}),x=E.map(function(e){return e.id}),M=b.filter(function(e){return x.includes(e.category_id)}),j=M.filter(function(e){return Lt(e)===o}),I=m&&j.filter(function(e){return e.category_id===m}),O=-U("activity")(E),A=U("balance")(E);return r.a.createElement(an,{location:i,historyAction:c,sidebarTrigger:u,budget:t,title:l,content:r.a.createElement(a.Fragment,null,r.a.createElement(Vn,{budgetId:h,currentMonth:o,highlightFunction:m&&function(e){return e.category_id===m},title:v?"Day by Day: ".concat(Nt(v.name)):"Day by Day",transactions:M,total:O+A}),r.a.createElement(sa,{entityKey:"category_id",entitiesById:y,expectNegative:!0,linkFunction:function(e){return ct(it.currentMonthCategory.path,{budgetId:h,categoryGroupId:n,categoryId:e})},selectedEntityId:m,title:"Categories",transactions:j,showTransactionCount:!0,onClickEntity:g}),r.a.createElement(Ka,{categoriesById:y,payeesById:f,transactions:I||j,title:v?"Transactions: ".concat(Nt(v.name)):"Transactions"}))})},Va=function(e){var t=e.budget,n=e.currentMonth,o=e.categoryId,c=e.historyAction,i=e.location,u=e.sidebarTrigger,l=e.title,s=t.id,d=t.payeesById,m=t.categoriesById,g=t.transactions,h=m[o],f=g.filter(function(e){return e.category_id===o}),p=f.filter(function(e){return Lt(e)===n}),y=-h.activity,b=h.balance;return r.a.createElement(an,{historyAction:c,location:i,sidebarTrigger:u,budget:t,title:l,content:r.a.createElement(a.Fragment,null,r.a.createElement(Vn,{key:h?h.name:"day-by-day",budgetId:s,currentMonth:n,title:"Day by Day",transactions:f,total:y+b}),r.a.createElement(Ka,{categoriesById:m,payeesById:d,transactions:p}))})},Ja=function(e){var t=e.budget,n=e.excludeFirstMonth,o=e.excludeLastMonth,c=e.historyAction,i=e.location,u=e.months,l=e.sidebarTrigger,d=e.title,m=e.transactions,g=e.selectedMonth,h=e.selectedGroupId,f=e.onSelectGroup,p=e.onSelectMonth,y=e.onSetExclusion,b=Ut(t.id),v=Object(It.a)(b,2),E=v[0],x=v[1],M=t.categoryGroupsById,j=t.categoriesById,I=t.id,O=h&&M[h],A=g&&m.filter(function(e){return Lt(e)===g});return r.a.createElement(an,{historyAction:c,location:i,sidebarTrigger:l,title:d,content:r.a.createElement(a.Fragment,null,r.a.createElement(Da,{excludeFirstMonth:n,excludeLastMonth:o,highlightFunction:h&&function(e){return j[e.category_id].category_group_id===h},months:u,selectedMonth:g,title:O?"Month by Month: ".concat(Nt(O.name)):"Month by Month",transactions:m,onSelectMonth:p,onSetExclusion:y}),r.a.createElement(sa,{key:g||"all",entityFunction:function(e){return j[e.category_id].category_group_id},entityKey:"category_group_id",entitiesById:M,expectNegative:!0,linkFunction:function(e){return ct(it.group.path,{budgetId:I,categoryGroupId:e})},selectedEntityId:h,title:g?"Category Groups: ".concat(s()(g).format("MMMM")):"Category Groups",transactions:A||m,onClickEntity:f,numMonths:u.length,showAverageToggle:!g,showAverage:E&&!g,onToggleAverage:x}))})},$a=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(se.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={allMounted:!1,showAll:!1},n.handleToggleShowAll=function(){var e=n.state,t=e.allMounted,a=e.showAll;t?n.setState({showAll:!a}):(n.setState({allMounted:!0}),requestAnimationFrame(function(){n.setState({showAll:!0})}))},n}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){var e=this.props,t=e.categoriesById,n=e.payeesById,o=e.selectedCategoryId,c=e.selectedPayeeId,i=e.selectedMonth,u=e.transactions,l=e.limitShowing,d=this.state,m=d.allMounted,g=d.showAll,h=o&&t[o],f=c&&n[c],p=s()(i).format("MMMM"),y=A()([l?G()("amount"):function(e){return e.reverse()},function(e){return e.filter(function(e){return Lt(e)===i&&(!o||e.category_id===o)&&(!c||e.payee_id===c)})}])(u),b=l&&y.length>5,v=b?y.slice(0,3):y,E=b?y.slice(3):[];return r.a.createElement(hn,{title:f?"Transactions: ".concat(p,", ").concat(f.name):h?"Transactions: ".concat(p,", ").concat(h.name):"Transactions: ".concat(p)},v.length?v.map(function(e){var a=e.id,o=e.date,c=e.amount,i=e.memo,u=e.payee_id,l=e.category_id;return r.a.createElement(Ua,{key:a,amount:c,category:t[l],date:o,memo:i,payee:n[u]})}):r.a.createElement(Xn,null),m&&r.a.createElement(rn.a,{isExpanded:g},r.a.createElement(a.Fragment,null,E.map(function(e){var a=e.id,o=e.date,c=e.amount,i=e.payee_id,u=e.category_id;return r.a.createElement(Ua,{key:a,amount:c,category:t[u],date:o,payee:n[i],isContinuing:!0})}))),!!E.length&&r.a.createElement(ra,{count:y.length,pluralizedName:"transactions",showAll:g,onToggle:this.handleToggleShowAll}))}}]),t}(a.Component);$a.defaultProps={limitShowing:!0};var Za=$a,Qa=function(e){var t=e.budget,n=e.categoryGroupId,o=e.excludeFirstMonth,c=e.excludeLastMonth,i=e.historyAction,u=e.location,l=e.months,d=e.selectedMonth,m=e.selectedCategoryId,g=e.sidebarTrigger,h=e.title,f=e.transactions,p=e.onSelectMonth,y=e.onSelectCategory,b=e.onSetExclusion,v=Ut(t.id),E=Object(It.a)(v,2),x=E[0],M=E[1],j=t.categories,I=t.categoriesById,O=t.categoryGroupsById,S=t.payeesById,C=t.id,k=O[n],w=m&&I[m],T=j.filter(function(e){return e.category_group_id===k.id}).map(function(e){return e.id}),B=f.filter(function(e){return T.includes(e.category_id)}),_=d&&A()([G()("amount"),function(e){return e.filter(function(e){return Lt(e)===d})}])(B);return r.a.createElement(an,{historyAction:i,location:u,sidebarTrigger:g,budget:t,title:h,content:r.a.createElement(a.Fragment,null,r.a.createElement(Da,{excludeFirstMonth:o,excludeLastMonth:c,months:l,highlightFunction:m&&function(e){return e.category_id===m},selectedMonth:d,title:w?"Month by Month: ".concat(Nt(w.name)):"Month by Month",transactions:B,onSelectMonth:p,onSetExclusion:b}),r.a.createElement(sa,{key:"categories-".concat(d||"all"),entityKey:"category_id",entitiesById:I,expectNegative:!0,linkFunction:function(e){return ct(it.category.path,{budgetId:C,categoryGroupId:k.id,categoryId:e})},title:d?"Categories: ".concat(s()(d).format("MMMM")):"Categories",transactions:_||B,selectedEntityId:m,onClickEntity:y,showAverageToggle:!d,showAverage:x&&!d,numMonths:l.length,onToggleAverage:M,limitShowing:!0}),d&&_.length>0&&r.a.createElement(Za,{key:"transactions-".concat(d||"all","-").concat(m||"all"),categoriesById:I,payeesById:S,selectedMonth:d,selectedCategoryId:m,transactions:_}))})},Xa={selectedMonth:null,selectedGroupId:null,selectedCategoryId:null,selectedPayeeId:null},er=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(se.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state=Xa,n.cachedStates={},n.handleSelectMonth=function(e){n.setState(function(t){return Object(v.a)({},t,{selectedMonth:t.selectedMonth===e?null:e})})},n.handleSelectGroup=function(e){n.setState(function(t){return Object(v.a)({},t,{selectedGroupId:t.selectedGroupId===e?null:e})})},n.handleSelectCategory=function(e){n.setState(function(t){return Object(v.a)({},t,{selectedCategoryId:t.selectedCategoryId===e?null:e})})},n.handleSelectPayee=function(e){n.setState(function(t){return Object(v.a)({},t,{selectedPayeeId:t.selectedPayeeId===e?null:e})})},n}return Object(me.a)(t,e),Object(le.a)(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.state}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.location,o=a.action;r!==e.location&&("POP"===o&&(this.cachedStates[e.location]=n,this.setState(this.cachedStates[r])),"PUSH"===o&&(this.cachedStates[e.location]=n,this.setState(Xa)),"REPLACE"===o&&this.setState(Xa))}},{key:"render",value:function(){return this.props.children(Object(v.a)({},this.state,{onSelectMonth:this.handleSelectMonth,onSelectGroup:this.handleSelectGroup,onSelectCategory:this.handleSelectCategory,onSelectPayee:this.handleSelectPayee,onSetExclusion:this.handleSetExclusion}))}}]),t}(a.Component),tr=function(e){var t=e.categoryId,n=e.budget,o=e.excludeFirstMonth,c=e.excludeLastMonth,i=e.historyAction,u=e.location,l=e.months,d=e.selectedMonth,m=e.selectedPayeeId,g=e.sidebarTrigger,h=e.title,f=e.transactions,p=e.onSelectMonth,y=e.onSelectPayee,b=e.onSetExclusion,v=n.categoriesById,E=n.payeesById,x=n.id,M=v[t],j=m&&E[m],I=f.filter(function(e){return e.category_id===t}),O=d&&I.filter(function(e){return Lt(e)===d});return r.a.createElement(an,{historyAction:i,location:u,sidebarTrigger:g,budget:n,title:h,content:r.a.createElement(a.Fragment,null,r.a.createElement(Da,{excludeFirstMonth:o,excludeLastMonth:c,months:l,onSetExclusion:b,highlightFunction:m&&function(e){return e.payee_id===m},selectedMonth:d,title:j?"Month by Month: ".concat(Nt(j.name)):"Month by Month",transactions:I,onSelectMonth:p}),r.a.createElement(sa,{key:"payees-".concat(d||"all"),emptyName:"(no payee)",entitiesById:E,entityKey:"payee_id",expectNegative:!0,linkFunction:function(e){return ct(it.categoryPayee.path,{budgetId:x,categoryGroupId:M.category_group_id,categoryId:t,payeeId:e})},title:d?"Payees: ".concat(s()(d).format("MMMM")):"Payees",transactions:O||I,selectedEntityId:m,onClickEntity:y,limitShowing:!0}),d&&O.length>0&&r.a.createElement(Za,{key:"transactions-".concat(d||"all","-").concat(m||"all"),categoriesById:v,payeesById:E,transactions:O,selectedMonth:d,selectedPayeeId:m}))})},nr=function(e){var t=e.budget,n=e.categoryId,o=e.excludeFirstMonth,c=e.excludeLastMonth,i=e.historyAction,u=e.location,l=e.months,s=e.payeeId,d=e.selectedMonth,m=e.sidebarTrigger,g=e.title,h=e.transactions,f=e.onSelectMonth,p=e.onSetExclusion,y=t.categoriesById,b=t.payeesById,v=h.filter(function(e){return e.category_id===n&&e.payee_id===s});return r.a.createElement(an,{historyAction:i,location:u,sidebarTrigger:m,budget:t,title:g,content:r.a.createElement(a.Fragment,null,r.a.createElement(Da,{excludeFirstMonth:o,excludeLastMonth:c,months:l,selectedMonth:d,transactions:v,onSelectMonth:f,onSetExclusion:p}),d&&r.a.createElement(Za,{categoriesById:y,payeesById:b,selectedMonth:d,transactions:v,limitShowing:!1}))})},ar=n(144),rr=n.n(ar),or=n(64),cr=n.n(or),ir=function(e){var t=e.data,n=e.onSelectMonth,a=e.selectedMonth;return r.a.createElement(Sa,{data:t,height:180,selectedMonth:a,series:[{color:Pe,valueFunction:function(e){return e.income}},{color:Fe,valueFunction:function(e){return e.expenses}},{type:"line",color:"#4399ff",valueFunction:function(e){return e.income+e.expenses}}],onSelectMonth:n})},ur=n(65),lr=n.n(ur);function sr(){var e=Object(pe.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n  user-select: none;\n\n  ",":first-child > & {\n    padding-top: 0;\n  }\n"]);return sr=function(){return e},e}var dr=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(se.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:!1,childrenMounted:!1},n.handleToggleExpand=function(){var e=n.state,t=e.expanded;e.childrenMounted?n.setState({expanded:!t}):(n.setState({childrenMounted:!0}),requestAnimationFrame(function(){n.setState({expanded:!0})}))},n}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.id,a=e.amount,o=e.nodes,c=e.isTopLevel,i=e.valueRenderer,u=this.state,l=u.expanded,s=u.childrenMounted,d=!!o&&o.length>0;return r.a.createElement(fr,{hasChildNodes:d,isTopLevel:c},d?r.a.createElement(ba,{id:n,name:t,amount:a,expanded:l,onToggle:this.handleToggleExpand,valueRenderer:i}):r.a.createElement(hr,{id:n,name:t,amount:a,valueRenderer:i}),d&&s&&r.a.createElement(rn.a,{isExpanded:l},r.a.createElement(mr,{nodes:o,valueRenderer:i})))}}]),t}(a.Component),mr=function(e){function t(){return Object(ue.a)(this,t),Object(se.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){var e=this.props,t=e.nodes,n=e.valueRenderer;return r.a.createElement("div",{style:{paddingLeft:18}},t.map(function(e){return r.a.createElement(dr,Object.assign({},e,{key:e.id,isTopLevel:!1,valueRenderer:n}))}))}}]),t}(a.PureComponent),gr=ye.a.div(sr(),$n),hr=function(e){var t=e.name,n=e.id,a=e.amount,o=e.valueRenderer;return r.a.createElement(gr,null,r.a.createElement(Ae,null,t),o?o({amount:a,id:n}):r.a.createElement(Ae,null,r.a.createElement(Bn,{amount:a})))},fr=function(e){var t=e.isTopLevel,n=(e.hasChildNodes,e.children);return t?r.a.createElement($n,{style:{display:"block",padding:0}},n):n},pr=dr,yr=function(e){var t=e.nodes,n=e.valueRenderer;return t.map(function(e){var t=e.id,a=e.name,o=e.amount,c=e.nodes;return r.a.createElement(pr,{key:t,id:t,name:a,amount:o,nodes:c,valueRenderer:n,isTopLevel:!0})})};yr.defaultProps={reverse:!1};var br=yr,vr=wt.a.convert({cap:!1}),Er=function(e){var t=e.categoriesById,n=e.categoryGroupsById,a=e.transactions,o=e.totalIncome,c=e.payeesById,i=e.divideBy,u=A()([vr(function(e,n){var a=Dt({payeesById:c,transactions:e},i);return Object(v.a)({},Ct()(["id","name","category_group_id"])(t[n]),{nodes:G()("amount")(a),amount:U("amount")(a)})}),z("category_id")])(a),l=A()([vr(function(e,t){var a=vr(P()("category_group_id"))(e);return Object(v.a)({},Ct()(["id","name"])(n[t]),{nodes:G()("amount")(a),amount:U("amount")(a)})}),z("category_group_id")])(u),s=Dt({payeesById:c,transactions:a.filter(function(e){return!e.category_id})},i),d=A()([function(e){return lr()(e)([{id:"net",amount:-o-U("amount")(e),name:"Net Income"}])},G()("amount"),lr()(s)])(l);return r.a.createElement(hn,{title:"Expenses Breakdown"},r.a.createElement(br,{nodes:d,valueRenderer:function(e){return r.a.createElement(aa,Object.assign({},e,{expectNegative:!0,total:-o}))}}))};Er.defaultProps={divideBy:1};var xr=Er,Mr=function(e){var t=e.transactions,n=e.payeesById,a=e.divideBy,o=Dt({payeesById:n,transactions:t},a),c=jn()("amount")(o);return r.a.createElement(hn,{title:"Income Breakdown"},r.a.createElement(br,{nodes:G()("amount")(o).reverse(),total:c,valueRenderer:function(e){return r.a.createElement(aa,Object.assign({},e,{expectPositive:!0,total:c}))}}))};Mr.defaultProps={divideBy:1};var jr=Mr,Ir=function(e){var t=e.categoriesById,n=e.categoryGroupsById,o=e.payeesById,c=e.expenseTransactions,i=e.incomeTransactions,u=e.divideBy;return r.a.createElement(a.Fragment,null,r.a.createElement(xr,{categoriesById:t,categoryGroupsById:n,payeesById:o,transactions:c,totalIncome:U("amount")(i)/u,divideBy:u}),r.a.createElement(jr,{payeesById:o,transactions:i,divideBy:u}))},Or=wt.a.convert({cap:!1}),Ar=q(function(e,t,n){return A()([G()("month"),Or(function(e,t){var a=N(Ft(n))(e);return{month:t,expenseTransactions:a.false||[],incomeTransactions:a.true||[],income:U("amount")(a.true||[]),expenses:U("amount")(a.false||[])}}),N(Lt)])(e)}),Sr=function(e){var t=e.budget,n=e.excludeFirstMonth,o=e.excludeLastMonth,c=e.historyAction,i=e.investmentAccounts,u=e.location,l=e.sidebarTrigger,s=e.title,d=e.transactions,m=e.onSetExclusion,g=zt(),h=Object(It.a)(g,2),f=h[0],p=h[1],y=Object(a.useState)(!1),b=Object(It.a)(y,2),v=b[0],E=b[1],x=Object(a.useState)(!1),M=Object(It.a)(x,2),j=M[0],I=M[1],O=t.categoriesById,A=t.categoryGroupsById,S=t.payeesById,k=Ar(d,i,t),w=f?[cr()(B()("month",f))(k)]:k,T=C()(function(e){return e.incomeTransactions})(rr()(w)),_=C()(function(e){return e.expenseTransactions})(rr()(w)),P=U("amount")(_),F=U("amount")(T),R=j?1:w.length;return r.a.createElement(an,{historyAction:c,location:u,sidebarTrigger:l,title:s,content:r.a.createElement(a.Fragment,null,r.a.createElement(hn,{title:"Monthly Trend",hasSettings:!0,onClickSettings:function(){E(!0)},actions:r.a.createElement(Ae,{onClick:function(){I(!j)}},j?"show average":"show total")},r.a.createElement(_n,{expectPositive:!0,numbers:[{label:"net income",amount:(P+F)/R},{label:"expenses",amount:-P/R},{label:"income",amount:F/R}]}),r.a.createElement(ir,{data:k,selectedMonth:f,onSelectMonth:p}),r.a.createElement(Ga,{excludeFirstMonth:n,excludeLastMonth:o,open:v,onClose:function(){E(!1)},onSetExclusion:m})),r.a.createElement(Ir,{categoriesById:O,categoryGroupsById:A,payeesById:S,expenseTransactions:_,incomeTransactions:T,divideBy:j?1:w.length}))})},Cr=n(227),kr=n.n(Cr),wr=n(228),Tr=n.n(wr),Br=n(26),_r=n.n(Br),Pr=n(39),Fr=n.n(Pr),Rr=n(66),Lr=n.n(Rr),Gr=n(145),Yr=n.n(Gr),Dr=n(229),Nr=n.n(Dr),zr=n(146),Wr=n.n(zr),Ur=n(35),qr=n.n(Ur),Kr=["mortgage","creditCard"],Hr=function(e){var t=e.data,n=e.months,a=e.mortgageAccounts,o=e.selectedMonth,c=e.onSelectMonth,i=N(function(e){return function(e){var t=e.type,n=e.id;return e.mortgageAccounts[n]?"liability":qr()(t)(Kr)?"liability":"asset"}({type:e.type,id:e.id,mortgageAccounts:a})})(t),u=n.map(function(e,t){return{month:e,assets:jn()(function(e){return e.data[t]})(i.asset),liabilities:jn()(function(e){return e.data[t]})(i.liability)}});return r.a.createElement(Sa,{selectedMonth:o,onSelectMonth:c,data:u,height:180,series:[{color:Fe,valueFunction:function(e){return Math.max(-e.liabilities,0)}},{color:Pe,valueFunction:function(e){return Math.max(e.assets,0)}},{color:"#4399ff",type:"line",valueFunction:function(e){return e.assets+e.liabilities}}],stacked:!1})},Vr=n(230),Jr=n.n(Vr),$r=n(231),Zr=n.n($r),Qr=n(232),Xr=n.n(Qr),eo=wt.a.convert({cap:!1}),to=function(e){var t=e.accountsById,n=e.hiddenAccounts,a=e.nodes,o=e.onToggleAccounts;return r.a.createElement(br,{nodes:a,valueRenderer:function(e){var c=e.id,i=e.amount,u=a.find(Zr()("id",c)),l=u?u.accounts:[t[c]];return r.a.createElement(Ae,{style:{display:"flex",alignItems:"center"}},r.a.createElement(Bn,{amount:i}),r.a.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:10}},r.a.createElement(Ba,{onClick:function(e){e.stopPropagation(),o({ids:eo("id")(l)})},on:!Jr()(function(e){return n[e.id]})(l)})))}})},no=function(e){var t=e.accounts,n=e.hiddenAccounts,a=e.onToggleAccounts,o=e.investmentAccounts,c=e.mortgageAccounts,i=fe()("id")(t),u=function(e){var t=e.accounts,n=e.investmentAccounts,a=e.mortgageAccounts,r=Fr()(function(e){return n[e.id]?"Investments":a[e.id]?"Mortgages":Xr()(e.type)})(t);return A()([function(e){return e.reverse()},G()("amount"),eo(function(e,t){return{name:t,accounts:e,amount:jn()("balance")(e),id:t,nodes:A()([G()("balance"),eo(function(e){var t=e.id,n=e.name;return{amount:e.balance,id:t,name:n}})])(e)}})])(r)}({accounts:t,investmentAccounts:o,mortgageAccounts:c});return r.a.createElement(hn,{title:"Accounts"},r.a.createElement(to,{accountsById:i,hiddenAccounts:n,nodes:u,onToggleAccounts:a}))},ao=function(e){var t=e.months,n=e.accountSummaries,a=e.hiddenAccounts,o=t.map(function(e){return{month:e,total:0}});n.forEach(function(e){var t=e.id,n=e.data;a[t]||n.forEach(function(e,t){o[t].total+=e})});var c=o.map(function(e,t){return{year:e.month.slice(0,4),month:e.month,change:0===t?null:e.total-o[t-1].total}}).reverse(),i=Fr()("year")(c),u=Object.keys(i).sort().reverse().map(function(e){return{amount:jn()("change")(i[e]),id:e,name:e,nodes:i[e].map(function(e){return{amount:e.change,name:s()(e.month).format("MMMM"),id:e.month}})}});return r.a.createElement(hn,{title:"Net Worth Changes"},r.a.createElement(br,{nodes:u,valueRenderer:function(e){var t=e.faded,n=e.amount;return r.a.createElement(Ae,{style:{opacity:t?.3:1}},r.a.createElement(Bn,{amount:n,positiveColor:"green",negativeColor:"red"}))}}))},ro=function(e){return e.reduce(function(e,t){return 0===e.length?[t]:e.concat(Bt()(e)+t)},[])},oo=q(A()([Yr()(Fr()("account_id")),Fr()(function(e){return e.date.slice(0,7)})])),co=q(function(e){return A()([G()(Lr.a),Ue.a,oo])(e.transactions)}),io=q(function(e){var t=oo(e.transactions),n=co(e);return wt()(function(e){var a=e.id;return{id:a,data:A()([ro,wt()(function(e){return jn()("amount")(t[e][a])})])(n)}})(e.accounts)}),uo=q(function(e,t){var n=co(t),a=Oa()(Tr()(e))(n),r=io(t);return A()([Yr()(function(e){var t=e.data;return a>-1?t[a]:Bt()(t)}),fe()("id")])(r)}),lo=function(e){var t=e.budget,n=e.historyAction,o=e.investmentAccounts,c=e.location,i=e.mortgageAccounts,u=e.sidebarTrigger,l=e.title,s=zt(),d=Object(It.a)(s,2),m=d[0],g=d[1],h=function(e){var t=Object(a.useState)(j("netWorthHiddenAccounts",e.id)),n=Object(It.a)(t,2),r=n[0],o=n[1];return{hiddenAccounts:r,onToggleHiddenAccounts:function(t){var n=t.ids,a=n.some(function(e){return!r[e]}),c=n.reduce(function(e,t){return Object(v.a)({},e,Object(b.a)({},t,a))},r);o(c),I("netWorthHiddenAccounts",e.id,c)}}}(t),f=h.hiddenAccounts,p=h.onToggleHiddenAccounts,y=co(t),E=io(t),x=uo(m,t),M=Nr()(function(e,t){return f[t]}),O=A()([Wr.a,_r()(function(e){return e<0}),Jt.a,M])(x),S=A()([Wr.a,_r()(function(e){return e>0}),Jt.a,M])(x);return r.a.createElement(an,{historyAction:n,location:c,sidebarTrigger:u,title:l,content:r.a.createElement(a.Fragment,null,r.a.createElement(hn,{title:"Monthly Trend"},r.a.createElement(_n,{alwaysRound:!0,expectPositive:!0,numbers:[{amount:S+O,label:"Net Worth"},{amount:S,label:"Assets"},{amount:-O,label:"Liabilities"}]}),r.a.createElement(Hr,{data:wt()(function(e){var n=e.id,a=e.data;return{data:f[n]?a.map(kr()(0)):a,type:t.accountsById[n].type,id:n}})(E),months:y,mortgageAccounts:i,selectedMonth:m,onSelectMonth:g})),r.a.createElement(no,{accounts:wt()(function(e){return Object(v.a)({},e,{balance:x[e.id]})})(t.accounts),hiddenAccounts:f,investmentAccounts:o,mortgageAccounts:i,onToggleAccounts:p}),r.a.createElement(ao,{accountSummaries:E,hiddenAccounts:f,months:y}))})},so=function(e){return function(t){return!!e[t.account_id]&&!!t.transfer_account_id&&!e[t.transfer_account_id]}},mo=function(e,t){return function(n){return!!e[n.account_id]&&!n.transfer_account_id&&"Starting Balance"!==m()([n.payee_id,"name"])(t)}},go=function(e){var t=e.budget,n=e.historyAction,o=e.investmentAccounts,c=e.location,u=e.sidebarTrigger,l=e.title,s=qt(t),d=s.excludeFirstMonth,m=s.excludeLastMonth,g=s.months,h=s.onSetExclusion,f=zt(),p=Object(It.a)(f,2),y=p[0],b=p[1],v=Wt(),E=Object(It.a)(v,2),x=E[0],M=E[1],j=t.payeesById;if(0===Ue()(o).length)return r.a.createElement(an,{historyAction:n,location:c,sidebarTrigger:u,title:l,content:r.a.createElement(Qn,null,"You don't have any accounts marked as investment accounts."," ",r.a.createElement(i.b,{to:ct(it.settings.path,{budgetId:t.id})},"Go to Settings"))});var I=t.transactions.filter(function(e,t){return function(n){return so(e)(n)||mo(e,t)(n)}}(o,j)),O=y&&I.filter(function(e){return Lt(e)===y});return r.a.createElement(an,{historyAction:n,location:c,sidebarTrigger:u,title:l,content:r.a.createElement(a.Fragment,null,r.a.createElement(Da,{excludeFirstMonth:d,excludeLastMonth:m,expectPositive:!0,highlightFunction:x&&function(e){return"contribution"===x?so(o)(e):mo(o,j)(e)},months:g,selectedMonth:y,transactions:I,onSelectMonth:b,onSetExclusion:h}),r.a.createElement(sa,{transactions:O||I,entitiesById:{contribution:{name:"Contributions"},capitalGain:{name:"Capital Gains/Losses"}},expectPositive:!0,title:"Growth Breakdown",onClickEntity:M,selectedEntityId:x,entityFunction:function(e){return so(o)(e)?"contribution":"capitalGain"},positiveIsRed:!0}))})},ho=n(147),fo=n.n(ho),po=n(67),yo=n.n(po),bo=n(233),vo=n.n(bo),Eo=n(234),xo=n.n(Eo),Mo=n(69),jo=n.n(Mo),Io=n(235),Oo=n.n(Io),Ao=n(45),So=n.n(Ao),Co=n(236),ko=n.n(Co),wo=function(e){var t=e.investmentsProjection,n=e.mortgageProjection,a=e.amountNeededToRetire,o=e.yearsUntilRetirement;return r.a.createElement(kn,{options:{chart:{type:"column"},xAxis:{type:"category",plotBands:[{color:Be,from:Math.floor(o)-.5,to:Math.floor(o)+.5}]},yAxis:{title:{text:null},endOnTick:!1,plotLines:[{value:a,color:"#ccc",width:1}]},legend:{enabled:!1},series:[{data:t,color:"#4399ff",borderWidth:0},{data:n,color:"red",borderWidth:0}]}})},To=function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},Bo=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(se.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).parent=null,n.handleBodyClick=function(e){n.props.onClickOff&&!To(n.parent,e.target)&&n.props.onClickOff()},n}return Object(me.a)(t,e),Object(le.a)(t,[{key:"componentDidMount",value:function(){document.body.addEventListener("click",this.handleBodyClick)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.handleBodyClick)}},{key:"render",value:function(){var e=this;return this.props.children({ref:function(t){e.parent=t}})}}]),t}(a.Component);function _o(){var e=Object(pe.a)(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: #fff;\n"]);return _o=function(){return e},e}var Po=document.getElementsByTagName("body")[0],Fo=ye.a.div(_o()),Ro=function(e){var t=e.name,n=e.formatter,a=e.label,c=e.value,i=e.onBlur,u=e.onChange,l=e.onReset,s=e.rangeOptions;return Object(o.createPortal)(r.a.createElement(Bo,{onClickOff:t&&i},function(e){var o=e.ref;return r.a.createElement(Fo,{ref:o},r.a.createElement(rn.a,{isExpanded:!!t},r.a.createElement("div",{style:{borderTop:"1px solid #bbb",padding:"15px 20px"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15}},a,": ",n(c||0),r.a.createElement(De,{onClick:function(){l(t)}},"reset")),r.a.createElement(Lo,Object.assign({},s,{name:t,value:c||0,onChange:u})))))}),Po)};Ro.defaultProps={formatter:function(e){return e}};var Lo=function(e){var t=e.name,n=(e.onReset,Object(ze.a)(e,["name","onReset"]));return r.a.createElement("input",Object.assign({},n,{name:t,type:"range",style:{display:"block",width:"100%"}}))},Go=Ro,Yo=[{label:"Average monthly contribution",name:"averageContribution",formatter:function(e){return"$".concat(Math.round(e))}},{label:"Average return on investments",name:"returnOnInvestments",formatter:function(e){return"".concat((100*e).toFixed(1),"%")}},{label:"Average expenses without mortgage",name:"averageExpenses",formatter:function(e){return"$".concat(Math.round(e))}},{label:"Return on investment after retirement",name:"retirementReturns",formatter:function(e){return"".concat((100*e).toFixed(1),"%")}},{label:"Average tax rate after retirement",name:"retirementTaxRate",formatter:function(e){return"".concat((100*e).toFixed(1),"%")}}],Do=W("name")(Yo),No=q(function(e,t,n){var a=function(e,t){var n=e.accounts,a=e.transactions,r=cr()(function(e){return t[e.id]})(n);if(!r)return null;var o=A()([G()("date"),_r()(h()({account_id:r.id}))])(a),c=A()([function(e){return e.date.slice(0,7)},Bt.a])(o),i=ko()(function(e){return e.date.slice(0,7)===c})(o),u=-A()([jn()("amount"),At()(function(e){return e.date.slice(0,7)!==c})])(o),l=u-jn()("amount")(i),s=A()([jo()("amount"),cr()(jo()("transfer_account_id"))])(i),d=(l+s)/u-1,m=-Math.log(1-d*u/s)/Math.log(1+d),g=12*d,f=m-1,p=wt()(function(e){return Math.pow(1+d,e)*u-(Math.pow(1+d,e)-1)/d*s})(xn()(1,m));return{rate:g,mortgagePayment:s,paymentsLeft:f,principalProjection:p}}(e,n)||{},r=a.paymentsLeft,o=a.mortgagePayment,c=a.principalProjection,i=function(e,t){var n=e.accounts,a=(e.payees,e.transactions),r=A()([_r()(function(e){return t[e]}),wt()("id")])(n),o=A()([Fr()(function(e){return e.date.slice(0,7)}),So()(function(e){return qr()(e.transfer_account_id)(r)}),_r()(function(e){return qr()(e.account_id)(r)})])(a),c=0,i=[],u=A()([G()(Lr.a),Ue.a])(o);wt()(function(e){return o[e]})(u).forEach(function(e){var t=A()([jn()("amount"),_r()(jo()("transfer_account_id"))])(e),n=So()(jo()("transfer_account_id"))(e),a=jn()("amount")(n);c&&n.length&&i.push(a/(c+.5*t)),c+=a+t});var l=A()([Oo()(xo.a,1),wt()(vo()(1))])(i),s=i.length;return Math.pow(l,12/s)-1}(e,t),u=function(e,t){var n=e.accounts,a=e.transactions,r=A()([_r()(function(e){return t[e]}),wt()("id")])(n),o=A()([_r()(function(e){var t=e.transfer_account_id;return t&&!qr()(t)(r)}),_r()(function(e){var t=e.account_id;return qr()(t)(r)})])(a),c=A()([G()(Lr.a),D.a,wt()(function(e){return e.slice(0,7)}),wt()("date")])(o);return jn()("amount")(o)/(s()(Bt()(c)).diff(s()(yo()(c)),"months")+1)}(e,t),l=function(e,t){var n=e.accounts,a=e.transactions,r=A()([_r()(function(e){return t[e]}),wt()("id")])(n);return A()([jn()("amount"),_r()(function(e){var t=e.account_id;return qr()(t)(r)})])(a)}(e,t),d=function(e,t,n){var a=e.transactions,r=e.accounts,o=e.payees,c=e.categoriesById,i=e.categoryGroupsById,u=A()([jo()("id"),cr()(h()({name:"Starting Balance"}))])(o),l=A()([G()(Lr.a),D.a,wt()(Lt)])(a),s=A()([_r()(function(e){return n[e]}),wt()("id")])(r),d=A()([_r()(function(e){return t[e]}),wt()("id")])(r);return-A()([jn()("amount"),So()(function(e){return e.amount>0&&!e.transfer_account_id&&(!e.category_id||!i[c[e.category_id].category_group_id])}),So()(function(e){return qr()(e.transfer_account_id)(lr()(s,d))}),So()(function(e){return qr()(e.account_id)(lr()(s,d))}),So()(function(e){return qr()(Lt(e))([yo()(l),Bt()(l)])}),So()(h()({payee_id:u}))])(a)/(l.length-2)}(e,t,n);return{mortgagePayment:o,remainingMortgagePayments:r,mortgageProjection:c,returnOnInvestments:i,averageContribution:u,currentInvestments:l,averageExpenses:d,retirementReturns:.04,retirementTaxRate:.15,maxAverageExpenses:1e3*Math.ceil(2*d/1e3),maxAverageContribution:1e3*Math.ceil(2*u/1e3)}}),zo=function(e){function t(e){var n;return Object(ue.a)(this,t),(n=Object(se.a)(this,Object(de.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(b.a)({},e.target.name,parseFloat(e.target.value)))},n.handleSelectAdjusting=function(e){n.setState(function(t){return{adjustingName:t.adjustingName===e?null:e}})},n.handleClearSelection=function(){n.setState({adjustingName:null})},n.handleResetCalculation=function(e){var t=n.props,a=t.budget,r=t.investmentAccounts,o=t.mortgageAccounts;n.setState(Ct()(e)(No(a,r,o)))},n.state=Object(v.a)({},No(e.budget,e.investmentAccounts,e.mortgageAccounts),{adjustingName:null}),n}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){for(var e=this,t=this.props,n=t.historyAction,o=t.location,c=t.sidebarTrigger,i=t.title,u=this.state,l=u.mortgagePayment,s=u.remainingMortgagePayments,d=u.mortgageProjection,g=u.returnOnInvestments,h=u.averageContribution,f=u.currentInvestments,p=u.averageExpenses,y=u.retirementReturns,b=u.retirementTaxRate,v=u.maxAverageExpenses,E=u.maxAverageContribution,x=u.adjustingName,M=function(e){var t=e.numMonths,n=e.returnOnInvestments,a=e.averageContribution,r=e.currentInvestments,o=Math.pow(1+n,1/12)-1,c=r,i=[];do{i.push(c),c+=a+(c+.5*a)*o}while(i.length<t);return i}({numMonths:600,returnOnInvestments:g,averageContribution:h,currentInvestments:f}),j=Math.pow(1+y,1/12)-1,I=p/(j*(1-b)),O=0;O<M.length;){if(O<s){var S=xn()(0,s-O).reduce(function(e,t){return e+l/Math.pow(1+j*(1-b),t)},0);if((M[O]-S)*j*(1-b)>p)break}else if(M[O]*j*(1-b)>p)break;O+=1}var C=function(e){var t=e.numMonths,n=e.returnOnInvestments,a=e.averageContribution,r=e.currentInvestments,o=e.monthsBeforeRetirement,c=e.monthlyExpenses,i=e.retirementReturns,u=e.retirementTaxRate,l=e.remainingMortgagePayments,s=e.mortgagePayment,d=Math.pow(1+n,1/12)-1,m=Math.pow(1+i,1/12)-1,g=r,h=[];do{h.push(g),h.length<o?g+=a+(g+.5*a)*d:(g+=g*m*(1-u)-c,h.length<l&&(g-=s))}while(h.length<t);return h}({numMonths:600,returnOnInvestments:g,averageContribution:h,currentInvestments:f,monthsBeforeRetirement:O,monthlyExpenses:p,retirementReturns:y,retirementTaxRate:b,remainingMortgagePayments:s,mortgagePayment:l}),k=!!l,w=O/12,T=A()([wt()(yo.a),fo()(12)])(C),B=A()([wt()(yo.a),fo()(12)])(d),_={averageContribution:{min:0,max:E,step:50},returnOnInvestments:{min:0,max:.2,step:.001},averageExpenses:{min:0,max:v,step:50},retirementReturns:{min:0,max:.2,step:.001},retirementTaxRate:{min:0,max:.5,step:.001}};return r.a.createElement(an,{historyAction:n,location:o,sidebarTrigger:c,title:i,content:r.a.createElement(a.Fragment,null,r.a.createElement(hn,{title:"Projection"},r.a.createElement(_n,{numbers:[{amount:-I,label:"needed for retirement",decimalsToRound:0},{amount:-w,label:"years to retirement",isMoney:!1,decimalsToRound:1}]}),r.a.createElement(wo,{investmentsProjection:T,mortgageProjection:B,amountNeededToRetire:I,yearsUntilRetirement:w})),r.a.createElement(hn,{title:"Assumptions"},Yo.map(function(t){var n=t.label,a=t.name,o=t.formatter;return r.a.createElement(Wo,{key:a,label:n,name:a,value:e.state[a],formatter:o,isAdjusting:x===a,onSelect:e.handleSelectAdjusting,onReset:e.handleResetCalculation,onChange:e.handleChange})}),k&&r.a.createElement(a.Fragment,null,r.a.createElement(Uo,{label:"Mortgage payment",value:l,formatter:function(e){return"$".concat(e.toFixed(2))}}),r.a.createElement(Uo,{label:"Time remaining on mortgage",value:s,formatter:function(e){return"".concat((e/12).toFixed(1)," years")}}))),r.a.createElement(Go,{name:x,label:m()([x,"label"])(Do),onReset:this.handleResetCalculation,onChange:this.handleChange,onBlur:this.handleClearSelection,formatter:m()([x,"formatter"])(Do),value:this.state[x],rangeOptions:_[x]}))})}}]),t}(a.PureComponent),Wo=function(e){var t=e.label,n=e.value,a=e.formatter,o=e.name,c=e.onSelect,i=e.isAdjusting;return r.a.createElement(Uo,{label:t,value:n,formatter:a,onClick:function(){c(o)},highlightValue:i,isAdjustable:!0})},Uo=function(e){var t=e.label,n=e.value,a=e.onClick,o=e.highlightValue,c=e.isAdjustable,i=e.formatter,u=void 0===i?function(e){return e}:i;return r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"2px 0"}},t,":",r.a.createElement("div",{style:{display:"flex",alignItems:"center"},onClick:a},r.a.createElement("strong",{style:{backgroundColor:o?Be:null,padding:c&&"0 4px",borderRadius:2}},u(n)),c&&r.a.createElement(ot,{icon:"pencil",faded:!0,style:{marginLeft:4}})))},qo=zo;function Ko(){var e=Object(pe.a)(["\n  margin: ",";\n  padding: ",";\n  background-color: #fff;\n  border: 1px solid #e5e5e5;\n  border-width: ",";\n  border-radius: 2px;\n"]);return Ko=function(){return e},e}var Ho=ye.a.div(Ko(),function(e){return e.top?"0":"3px"},function(e){return e.noPadding?"0":e.top?"15px 23px":"15px 20px"},function(e){return e.top?"0 0 1px":"1px"}),Vo=function(e){var t=e.accounts,n=e.value,a=e.onChange;return t.map(function(e){var t=e.id,o=e.name;return r.a.createElement(La,{key:t,checked:!!n[t],name:t,onChange:function(e){var t=e.target,r=t.name,o=t.checked;a(o?Object(v.a)({},n,Object(b.a)({},r,!0)):P()(r)(n))},label:o})})};function Jo(){var e=Object(pe.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return Jo=function(){return e},e}var $o=ye.a.div(Jo()),Zo=function(e){var t=e.budget,n=e.investmentAccounts,o=e.onUpdateAccounts,c=Kt(!1),i=Object(It.a)(c,3),u=i[0],l=i[1],s=i[2],d=t.accounts.filter(function(e){return"otherAsset"===e.type&&!e.on_budget}),m=t.accounts.filter(function(e){var t=e.id;return n[t]});return r.a.createElement(a.Fragment,null,r.a.createElement($o,null,r.a.createElement(Oe,null,"Investment Accounts"),r.a.createElement("span",{onClick:s},r.a.createElement(ot,{icon:"pencil"}))),m.length?m.map(function(e){var t=e.id,n=e.name;return r.a.createElement(Ae,{key:t},n)}):r.a.createElement(Qn,null,"No accounts marked as investment"),r.a.createElement(Se,{style:{marginTop:10}},"Transfers to investment accounts are not counted as spending since it's assumed it's for retirement or some other savings goal."),r.a.createElement(qn,{open:u,onClose:l,title:"Investment Accounts"},r.a.createElement(Vo,{accounts:d,value:n,onChange:function(e){o({type:"investment",value:e})}})))};function Qo(){var e=Object(pe.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return Qo=function(){return e},e}var Xo=ye.a.div(Qo()),ec=function(e){var t=e.budget,n=e.mortgageAccounts,o=e.onUpdateAccounts,c=Kt(!1),i=Object(It.a)(c,3),u=i[0],l=i[1],s=i[2],d=t.accounts.filter(function(e){return"otherLiability"===e.type&&!e.on_budget}),m=t.accounts.filter(function(e){var t=e.id;return n[t]});return r.a.createElement(a.Fragment,null,r.a.createElement(Xo,null,r.a.createElement(Oe,null,"Mortgage Accounts"),r.a.createElement("span",{onClick:s},r.a.createElement(ot,{icon:"pencil"}))),m.length?m.map(function(e){var t=e.id,n=e.name;return r.a.createElement(Ae,{key:t},n)}):r.a.createElement(Qn,null,"No accounts marked as mortgage"),r.a.createElement(Se,{style:{marginTop:10}},"Mortgage accounts are used in the retirement calculator since it's a significant expense you won't have in your retirement presumably."),r.a.createElement(qn,{open:u,onClose:l,title:"Mortgage Account"},r.a.createElement(Vo,{accounts:d,value:n,onChange:function(e){o({type:"mortgage",value:e})}})))};function tc(){var e=Object(pe.a)(["\n  height: 20px;\n"]);return tc=function(){return e},e}var nc=ye.a.div(tc()),ac=function(e){var t=e.budget,n=e.historyAction,o=e.investmentAccounts,c=e.location,i=e.mortgageAccounts,u=e.sidebarTrigger,l=e.title,s=e.onUpdateAccounts;return r.a.createElement(an,{historyAction:n,location:c,sidebarTrigger:u,title:l,content:r.a.createElement(a.Fragment,null,r.a.createElement(Ho,null,r.a.createElement(Zo,{budget:t,investmentAccounts:o,onUpdateAccounts:s}),r.a.createElement(nc,null),r.a.createElement(ec,{budget:t,mortgageAccounts:i,onUpdateAccounts:s})))})},rc=q(function(e,t,n,a){var r=Yt(e),o=s()().format("YYYY-MM");return e.transactions.filter(K([Pt(e),Rt(t),function(e){return n&&Lt(e)===r},function(e){return a&&Lt(e)===o}]))}),oc=q(function(e,t,n,a){return rc(e,t,n,a).filter(function(t){return!Ft(e)(t)})}),cc=Object(a.memo)(function(e){var t=e.budget,n=e.currentMonth,a=e.historyAction,o=e.investmentAccounts,c=e.location,u=e.mortgageAccounts,l=e.sidebarTrigger,s=e.onUpdateAccounts,d=qt(t),m=d.excludeFirstMonth,g=d.excludeLastMonth,h=d.months,f=d.onSetExclusion;return t?r.a.createElement(ge.d,null,r.a.createElement(ge.b,{path:it.currentMonth.path,exact:!0,render:function(){return r.a.createElement(ja,{budget:t,currentMonth:n,investmentAccounts:o,historyAction:a,location:c,sidebarTrigger:l,title:it.currentMonth.title})}}),r.a.createElement(ge.b,{path:it.currentMonthGroup.path,exact:!0,render:function(e){var o=e.match;return r.a.createElement(Ha,{budget:t,categoryGroupId:o.params.categoryGroupId,currentMonth:n,historyAction:a,location:c,sidebarTrigger:l,title:it.currentMonthGroup.title(o.params,t)})}}),r.a.createElement(ge.b,{path:it.currentMonthCategory.path,exact:!0,render:function(e){var o=e.match;return r.a.createElement(Va,{categoryId:o.params.categoryId,budget:t,currentMonth:n,categoryGroupId:o.params.categoryGroupId,historyAction:a,location:c,sidebarTrigger:l,title:it.currentMonthCategory.title(o.params,t)})}}),r.a.createElement(ge.b,{path:it.income.path,exact:!0,render:function(){return r.a.createElement(Wa,{investmentAccounts:o,budget:t,historyAction:a,location:c,sidebarTrigger:l,title:it.income.title})}}),r.a.createElement(ge.b,{path:it.incomeVsExpenses.path,exact:!0,render:function(){var n=rc(e.budget,e.investmentAccounts,m,g);return r.a.createElement(Sr,{budget:t,excludeFirstMonth:m,excludeLastMonth:g,investmentAccounts:o,historyAction:a,location:c,sidebarTrigger:l,title:it.incomeVsExpenses.title,transactions:n,onSetExclusion:f})}}),r.a.createElement(ge.b,{path:it.netWorth.path,exact:!0,render:function(){return r.a.createElement(lo,{budget:t,historyAction:a,investmentAccounts:o,location:c,mortgageAccounts:u,sidebarTrigger:l,title:it.netWorth.title})}}),r.a.createElement(ge.b,{path:it.investments.path,exact:!0,render:function(){return r.a.createElement(go,{budget:t,investmentAccounts:o,title:it.investments.title,historyAction:a,location:c,sidebarTrigger:l})}}),r.a.createElement(ge.b,{path:it.projections.path,exact:!0,render:function(){return r.a.createElement(qo,{budget:t,investmentAccounts:o,mortgageAccounts:u,title:it.projections.title,historyAction:a,location:c,sidebarTrigger:l})}}),r.a.createElement(ge.b,{path:it.settings.path,exact:!0,render:function(){return r.a.createElement(ac,{budget:t,historyAction:a,investmentAccounts:o,location:c,mortgageAccounts:u,sidebarTrigger:l,title:it.settings.title,onUpdateAccounts:s})}}),r.a.createElement(ge.b,{path:it.groups.path,render:function(){var e=oc(t,o,m,g);return r.a.createElement(er,{action:a,location:c},function(n){var o=n.selectedMonth,i=n.selectedGroupId,u=n.selectedCategoryId,s=n.selectedPayeeId,d=n.onSelectMonth,p=n.onSelectGroup,y=n.onSelectCategory,b=n.onSelectPayee;return r.a.createElement(ge.d,null,r.a.createElement(ge.b,{path:it.groups.path,exact:!0,render:function(){return r.a.createElement(Ja,{budget:t,excludeFirstMonth:m,excludeLastMonth:g,historyAction:a,location:c,months:h,selectedGroupId:i,selectedMonth:o,sidebarTrigger:l,title:it.groups.title,transactions:e,onSelectGroup:p,onSetExclusion:f,onSelectMonth:d})}}),r.a.createElement(ge.b,{path:it.group.path,exact:!0,render:function(n){var i=n.match;return r.a.createElement(Qa,{budget:t,categoryGroupId:i.params.categoryGroupId,excludeFirstMonth:m,excludeLastMonth:g,historyAction:a,location:c,months:h,selectedMonth:o,selectedCategoryId:u,sidebarTrigger:l,title:it.group.title(i.params,t),transactions:e,onSelectCategory:y,onSelectMonth:d,onSetExclusion:f})}}),r.a.createElement(ge.b,{path:it.category.path,exact:!0,render:function(n){var i=n.match;return r.a.createElement(tr,{budget:t,categoryId:i.params.categoryId,excludeFirstMonth:m,excludeLastMonth:g,historyAction:a,location:c,months:h,selectedMonth:o,selectedPayeeId:s,sidebarTrigger:l,title:it.category.title(i.params,t),transactions:e,onSetExclusion:f,onSelectMonth:d,onSelectPayee:b})}}),r.a.createElement(ge.b,{path:it.categoryPayee.path,exact:!0,render:function(n){var i=n.match;return r.a.createElement(nr,{budget:t,categoryId:i.params.categoryId,excludeFirstMonth:m,excludeLastMonth:g,historyAction:a,location:c,months:h,payeeId:i.params.payeeId,selectedMonth:o,sidebarTrigger:l,title:it.categoryPayee.title(i.params,t),transactions:e,onSetExclusion:f,onSelectMonth:d})}}))})}}),r.a.createElement(ge.b,{render:function(){return r.a.createElement("div",{style:{padding:20}},r.a.createElement(i.b,{to:ct(it.currentMonth.path,{budgetId:t.id})},"Return to ",it.currentMonth.title))}})):null},function(e,t){return["budget","currentMonth","historyAction","investmentAccounts","location","mortgageAccounts"].every(function(n){return e[n]===t[n]})}),ic=function(e){var t=e.onAuthorize;return r.a.createElement(Ho,null,r.a.createElement(je,null,"Budget Reports"),r.a.createElement("div",{style:{marginBottom:10}},"Get various insights from your YNAB account."),r.a.createElement(Ye,{onClick:t},"Authorize YNAB"),r.a.createElement(Oe,{style:{marginTop:30}},"Privacy Policy"),r.a.createElement(Ae,null,"This website does not store any information from you or your YNAB account on it's server. All data retrieved from the YNAB API is stored only in your browser's local storage and is never transmitted to any other location or third-party."))};function uc(){var e=Object(pe.a)(["\n  padding: 10px 20px;\n"]);return uc=function(){return e},e}var lc=ye.a.div(uc()),sc=function(e){var t=e.message;return r.a.createElement(lc,null,r.a.createElement("h3",null,t),r.a.createElement("div",null,r.a.createElement(i.b,{to:"/"},"Home")))},dc=function(){return r.a.createElement(sc,{message:"Page not found"})},mc=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(se.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},n}return Object(me.a)(t,e),Object(le.a)(t,[{key:"componentDidCatch",value:function(e){Rollbar.error(e),this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(sc,{message:this.props.message}):this.props.children}}]),t}(a.Component);mc.defaultProps={message:"Something went wrong"};var gc,hc=mc,fc=function(e){function t(){return Object(ue.a)(this,t),Object(se.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(le.a)(t,[{key:"componentDidMount",value:function(){this.props.budgetsLoaded||this.props.onRequestBudgets()}},{key:"render",value:function(){var e=this.props,t=e.budgets;return e.budgetsLoaded?r.a.createElement(Ho,null,r.a.createElement(Oe,null,"Select a budget:"),t.map(function(e){var t=e.id,n=e.name;return r.a.createElement("div",{key:t},r.a.createElement(i.b,{to:ct(it.currentMonth.path,{budgetId:t})},n))})):r.a.createElement(Ce,null)}}]),t}(a.Component),pc=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(se.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={authorized:!0,budgetsLoaded:!1,budgetIds:[],budgets:{},defaultBudget:ce(),budgetDetails:{},currentMonth:s()().format("YYYY-MM")},n.handleRequestBudgets=function(e){ae().then(function(t){var a=t.budgets,r=t.default_budget;n.setState({budgetsLoaded:!0,budgetIds:a.map(function(e){return e.id}),budgets:fe()("id")(a),defaultBudget:r},e)})},n.handleRequestBudget=function(e){oe(e).then(function(t){var a=t.budget,r=t.authorized;n.setState(function(t){return Object(v.a)({},t,{authorized:r,budgetDetails:Object(v.a)({},t.budgetDetails,Object(b.a)({},e,a))})})})},n.handleAuthorize=function(){ie(),window.location.replace(te)},n}return Object(me.a)(t,e),Object(le.a)(t,[{key:"render",value:function(){var e=this,t=this.props.hasToken,n=this.state,a=n.authorized,o=n.budgetsLoaded,c=n.budgetIds,i=n.budgets,u=n.defaultBudget,l=n.budgetDetails,s=n.currentMonth;return t?r.a.createElement(hc,null,r.a.createElement(ge.d,null,r.a.createElement(ge.b,{path:"/",exact:!0,render:function(){return u&&u.id?r.a.createElement(ge.a,{to:"/budgets/".concat(u.id,"/current")}):r.a.createElement(ge.a,{to:"/budgets"})}}),r.a.createElement(ge.b,{path:"/budgets",exact:!0,render:function(){return r.a.createElement(fc,{budgets:c.map(function(e){return i[e]}),budgetsLoaded:o,onRequestBudgets:e.handleRequestBudgets})}}),r.a.createElement(ge.b,{path:"/budgets/:budgetId",render:function(t){var n=t.match,o=t.history,c=t.location,i=n.params.budgetId,u=l[i];return r.a.createElement(jt,{authorized:a,budgetId:i,budgetLoaded:!!u,location:c.pathname,onAuthorize:e.handleAuthorize,onRequestBudget:e.handleRequestBudget},function(t){var n=t.sidebarTrigger;return r.a.createElement(wn.Provider,{value:m()("currencyFormat")(u)},r.a.createElement(cc,{sidebarTrigger:n,historyAction:o.action,location:c.pathname,budget:u,currentMonth:s,investmentAccounts:j("investmentAccounts",i),mortgageAccounts:j("mortgageAccounts",i),onUpdateAccounts:function(t){var n=t.type,a=t.value;"investment"===n&&I("investmentAccounts",i,a),"mortgage"===n&&I("mortgageAccounts",i,a),e.forceUpdate()}}))})}}),r.a.createElement(ge.b,{component:dc}))):r.a.createElement(ic,{onAuthorize:this.handleAuthorize})}}]),t}(a.Component),yc=function(){if("/"===window.location.hash[1])return localStorage.getItem("ynab_access_token");var e=window.location.hash.substring(1).replace(/&/g,'","').replace(/=/g,'":"');if(!e)return localStorage.getItem("ynab_access_token");var t=m()("access_token")(JSON.parse('{"'+e+'"}',function(e,t){return""===e?t:decodeURIComponent(t)}));return localStorage.setItem("ynab_access_token",t),window.location.hash=localStorage.getItem("budget-reports-last-location")||"",localStorage.removeItem("budget-reports-last-location"),t}();yc&&(gc=yc,ne=new u.a(gc)),c.a.render(r.a.createElement(i.a,null,r.a.createElement(pc,{hasToken:!!yc})),document.getElementById("root"))}},[[239,1,2]]]);
//# sourceMappingURL=main.db642480.chunk.js.map